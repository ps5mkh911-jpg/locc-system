<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø³Ø§Ø­Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© ÙˆØ§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª - LOCC</title>
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            --primary: #ffd700;
            --bg-dark: #0a0a0a;
            --bg-card: #1a1a1a;
            --bg-input: #2a2a2a;
            --green: #4caf50;
            --blue: #2196f3;
            --red: #f44336;
            --orange: #ff9800;
            --purple: #9c27b0;
            --cyan: #00bcd4;
            --text: #fff;
            --text-muted: #888;
            --panel-width: 320px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; overflow-x: hidden; }

        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.6;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 4px; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ø±Ø£Ø³ÙŠØ© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .header {
            background: linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%);
            padding: 10px 20px;
            border-bottom: 3px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .header-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            text-shadow: 0 0 15px rgba(255,215,0,0.5);
        }

        .header-company {
            font-size: 1.8rem;
            font-weight: 900;
            color: #fff;
            text-shadow: 0 0 10px var(--primary);
            border: 2px solid var(--primary);
            padding: 5px 20px;
            border-radius: 8px;
        }

        .header-info {
            display: flex;
            gap: 10px;
        }

        .info-box {
            background: rgba(255,215,0,0.1);
            border: 2px solid var(--primary);
            padding: 8px 15px;
            border-radius: 8px;
            text-align: center;
            min-width: 100px;
        }

        .info-box-label { font-size: 0.7rem; color: var(--text-muted); }
        .info-box-value { font-size: 1.1rem; font-weight: 700; color: var(--primary); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø£Ø´Ø±Ø·Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .stats-bar {
            background: var(--bg-card);
            padding: 5px 10px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 6px;
            border-bottom: 2px solid rgba(255,215,0,0.3);
        }

        .stats-bar-title {
            width: 100%;
            text-align: center;
            font-size: 0.7rem;
            color: var(--primary);
            margin-bottom: 3px;
            font-weight: 600;
        }

        .stat-card {
            background: rgba(255,215,0,0.05);
            border: 1px solid var(--primary);
            border-radius: 6px;
            padding: 4px 10px;
            text-align: center;
            min-width: 70px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,215,0,0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255,215,0,0.3);
        }

        .stat-card.green { border-color: var(--green); }
        .stat-card.blue { border-color: var(--blue); }
        .stat-card.red { border-color: var(--red); animation: pulse-red 1s infinite; }

        @keyframes pulse-red {
            0%, 100% { box-shadow: 0 0 5px var(--red); }
            50% { box-shadow: 0 0 25px var(--red), 0 0 50px var(--red); }
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary);
            position: relative;
            z-index: 1;
        }

        .stat-card.green .stat-value { color: var(--green); }
        .stat-card.blue .stat-value { color: var(--blue); }
        .stat-card.red .stat-value { color: var(--red); }

        .stat-label {
            font-size: 0.6rem;
            color: var(--text-muted);
            position: relative;
            z-index: 1;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø´Ø±ÙŠØ· Ø§Ù„ØªØ£Ø´ÙŠØ±Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .visa-bar {
            background: rgba(0,0,0,0.3);
            padding: 8px 15px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
            border-bottom: 1px solid rgba(255,215,0,0.2);
        }

        .visa-card {
            background: var(--bg-input);
            border: 1px solid rgba(255,215,0,0.5);
            border-radius: 6px;
            padding: 6px 12px;
            text-align: center;
            min-width: 80px;
        }

        .visa-card-title { font-size: 0.7rem; color: var(--primary); }
        .visa-card-value { font-size: 1rem; font-weight: 700; color: #fff; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ­Ø¯ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .unified-stats-bar {
            background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
            padding: 5px 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
            border-bottom: 2px solid var(--primary);
        }

        .stats-group {
            display: flex;
            gap: 3px;
            align-items: center;
        }

        .stats-divider {
            width: 2px;
            height: 30px;
            background: var(--primary);
            margin: 0 8px;
            opacity: 0.5;
        }

        .mini-stat {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .mini-stat:hover {
            transform: scale(1.05);
        }

        .mini-stat:hover .mini-box {
            background: rgba(255,215,0,0.15);
        }

        .mini-stat.green .mini-box { border-color: var(--green); }
        .mini-stat.blue .mini-box { border-color: var(--blue); }
        .mini-stat.red .mini-box { border-color: var(--red); }

        .mini-box {
            background: rgba(255,215,0,0.05);
            border: 1px solid rgba(255,215,0,0.3);
            border-radius: 4px;
            padding: 3px 8px;
            min-width: 35px;
            text-align: center;
        }

        .mini-value {
            display: block;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--primary);
            line-height: 1.2;
        }

        .mini-stat.green .mini-value { color: var(--green); }
        .mini-stat.blue .mini-value { color: var(--blue); }
        .mini-stat.red .mini-value { color: var(--red); }

        .mini-label {
            display: block;
            font-size: 0.7rem;
            color: var(--text-muted);
            line-height: 1.2;
            margin-bottom: 2px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .main-container {
            display: flex;
            min-height: calc(100vh - 180px);
        }

        .content-area {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¥Ø·Ø§Ø± Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ø«Ø§Ø¨Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .parking-wrapper {
            border: 3px solid var(--primary);
            border-radius: 15px;
            background: linear-gradient(180deg, rgba(26,26,26,0.95) 0%, rgba(10,10,10,0.98) 100%);
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 0 30px rgba(255,215,0,0.2), inset 0 0 50px rgba(0,0,0,0.5);
            /* Ø­Ø¬Ù… Ø«Ø§Ø¨Øª Ù„Ø§ ÙŠØªØ£Ø«Ø± Ø¨Ø§Ù„ØªÙƒØ¨ÙŠØ± */
            width: 100%;
            min-height: 500px;
            max-height: 75vh;
            overflow: hidden;
            position: relative;
        }

        .parking-wrapper-title {
            text-align: center;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            padding: 10px 20px;
            background: rgba(255,215,0,0.1);
            border: 2px solid var(--primary);
            border-radius: 10px;
            margin-bottom: 15px;
            text-shadow: 0 0 15px rgba(255,215,0,0.5);
            letter-spacing: 2px;
        }

        .parking-inner {
            width: 100%;
            height: calc(100% - 60px);
            overflow: auto;
            border-radius: 10px;
            background: rgba(0,0,0,0.3);
            padding: 10px;
        }

        .parking-inner::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        .parking-inner::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.5);
            border-radius: 5px;
        }

        .parking-inner::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 5px;
        }

        .parking-inner::-webkit-scrollbar-corner {
            background: rgba(0,0,0,0.5);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ø£ÙÙ‚ÙŠØ© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .parking-container {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            transform-origin: top right;
            transition: transform 0.3s ease;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…ÙˆØ§Ù‚Ù â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .parking-section {
            flex: 1;
            margin-bottom: 0;
        }

        .section-title {
            text-align: center;
            font-size: 1.1rem;
            color: var(--primary);
            padding: 10px;
            background: rgba(255,215,0,0.1);
            border: 2px solid var(--primary);
            border-radius: 8px;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .parking-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }

        .parking-grid.exit-grid {
            grid-template-columns: repeat(7, 1fr);
        }

        .parking-spot {
           aspect-ratio: 1/1;
           min-height: 55px;
            max-width: 55px;
            background: var(--bg-input);
            border: 3px solid #444;
            border-radius: 8px;
            padding: 5px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
        }

        .parking-spot:hover {
            transform: scale(1.08);
            box-shadow: 0 0 25px rgba(255,215,0,0.6);
            z-index: 10;
        }

        .parking-spot.early {
            background: linear-gradient(135deg, #1b5e20, #2e7d32);
            border-color: var(--green);
            box-shadow: 0 0 15px rgba(76,175,80,0.5);
        }

        .parking-spot.ontime {
            background: linear-gradient(135deg, #0d47a1, #1565c0);
            border-color: var(--blue);
            box-shadow: 0 0 15px rgba(33,150,243,0.5);
        }

        .parking-spot.late {
            background: linear-gradient(135deg, #b71c1c, #d32f2f);
            border-color: var(--red);
            animation: spot-pulse 0.6s infinite;
        }

        @keyframes spot-pulse {
            0%, 100% { box-shadow: 0 0 15px var(--red); transform: scale(1); }
            50% { box-shadow: 0 0 40px var(--red), 0 0 60px rgba(244,67,54,0.5); transform: scale(1.02); }
        }

        .parking-spot.empty {
            background: rgba(30,30,30,0.6);
            border-color: #333;
            opacity: 0.5;
        }

        .parking-spot.empty:hover { opacity: 0.8; }

        .spot-number {
            position: absolute;
            top: 3px;
            right: 3px;
            background: rgba(0,0,0,0.8);
            color: var(--primary);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.65rem;
            font-weight: 700;
        }

        .spot-badge {
            position: absolute;
            top: 3px;
            left: 3px;
            padding: 2px 5px;
            border-radius: 4px;
            font-size: 0.55rem;
            font-weight: 700;
            color: #fff;
        }

        .spot-badge.early { background: var(--green); }
        .spot-badge.ontime { background: var(--blue); }
        .spot-badge.late { background: var(--red); }

        .bus-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 2px;
            margin-top: 18px;
            font-size: 0.6rem;
            color: #fff;
        }

        .info-row {
            display: flex;
            align-items: center;
            gap: 3px;
            white-space: nowrap;
            overflow: hidden;
        }

        .info-icon { font-size: 0.7rem; }

        .countdown {
            text-align: center;
            font-size: 0.65rem;
            font-weight: 700;
            padding: 3px;
            background: rgba(0,0,0,0.5);
            border-radius: 4px;
            margin-top: auto;
        }

        .empty-text {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #444;
            font-size: 1.5rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù‚Ø³Ù… Ø§Ù„Ø¨ÙˆØ§Ø¨Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .gates-section {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            border: 2px solid var(--primary);
        }

        .gates-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .gate-box {
            background: var(--bg-card);
            border: 2px solid var(--primary);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
        }

        .gate-name {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .gate-count {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .control-panel {
            width: var(--panel-width);
           background: ...
           border-right: ...
            padding: 15px;
            overflow-y: auto;
            transition: all 0.3s;
            position: relative;
            z-index: 100;
        }

        .control-panel.hidden {
            width: 0;
            padding: 0;
            overflow: hidden;
        }

        .panel-section {
            background: rgba(255,215,0,0.03);
            border: 1px solid rgba(255,215,0,0.3);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .panel-title {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255,215,0,0.3);
        }

        .panel-stat {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            font-size: 0.85rem;
        }

        .panel-stat-value { color: var(--primary); font-weight: 700; }

        .panel-btn {
            width: 100%;
            padding: 10px;
            margin-top: 8px;
            border: none;
            border-radius: 6px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
        }

        .panel-btn.primary {
            background: linear-gradient(135deg, var(--primary), #ffed4e);
            color: #000;
        }

        .panel-btn.success {
            background: linear-gradient(135deg, var(--green), #81c784);
            color: #fff;
        }

        .panel-btn.danger {
            background: linear-gradient(135deg, var(--red), #e57373);
            color: #fff;
        }

        .panel-btn.info {
            background: linear-gradient(135deg, var(--blue), #64b5f6);
            color: #fff;
        }

        .panel-btn.warning {
            background: linear-gradient(135deg, #ff9800, #ffb74d);
            color: #000;
        }

        .panel-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255,215,0,0.4);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ØªØ¨ÙˆÙŠØ¨Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .panel-tabs {
            display: flex;
            background: var(--bg-dark);
            border-radius: 8px;
            margin-bottom: 10px;
            overflow: hidden;
            border: 1px solid var(--primary);
        }

        .panel-tab {
            flex: 1;
            padding: 8px 4px;
            text-align: center;
            cursor: pointer;
            font-size: 0.7rem;
            color: var(--text-muted);
            transition: all 0.3s;
            border: none;
            background: transparent;
        }

        .panel-tab:hover {
            background: rgba(255,215,0,0.1);
            color: var(--primary);
        }

        .panel-tab.active {
            background: var(--primary);
            color: #000;
            font-weight: 700;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,215,0,0.1);
        }

        .setting-label {
            font-size: 0.8rem;
            color: var(--text);
        }

        .setting-input {
            width: 80px;
            padding: 5px;
            background: var(--bg-input);
            border: 1px solid var(--primary);
            border-radius: 4px;
            color: var(--primary);
            text-align: center;
            font-size: 0.85rem;
        }

        .setting-toggle {
            position: relative;
            width: 50px;
            height: 26px;
            background: var(--bg-input);
            border-radius: 13px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #444;
        }

        .setting-toggle.active {
            background: var(--green);
            border-color: var(--green);
        }

        .setting-toggle::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 18px;
            height: 18px;
            background: #fff;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .setting-toggle.active::after {
            left: 27px;
        }

        .color-picker {
            width: 40px;
            height: 30px;
            border: 2px solid var(--primary);
            border-radius: 4px;
            cursor: pointer;
            padding: 0;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .alerts-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .alert-item {
            padding: 8px;
            margin-bottom: 6px;
            border-radius: 6px;
            font-size: 0.75rem;
            border-right: 3px solid;
            background: rgba(0,0,0,0.3);
        }

        .alert-item.critical { border-color: var(--red); background: rgba(244,67,54,0.1); }
        .alert-item.warning { border-color: var(--orange); background: rgba(255,152,0,0.1); }
        .alert-item.info { border-color: var(--blue); background: rgba(33,150,243,0.1); }
        .alert-item.success { border-color: var(--green); background: rgba(76,175,80,0.1); }

        .alert-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .alert-title { font-weight: 700; }
        .alert-time { color: var(--text-muted); font-size: 0.65rem; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .kpi-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,215,0,0.3);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            text-align: center;
        }

        .kpi-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .kpi-label {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .progress-bar {
            height: 8px;
            background: var(--bg-input);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s;
        }

        .chart-bars {
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            height: 80px;
            padding: 10px 0;
        }

        .chart-bar {
            width: 30%;
            border-radius: 4px 4px 0 0;
            transition: height 0.5s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
        }

        .chart-bar-label {
            font-size: 0.6rem;
            color: var(--text);
            margin-top: 5px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .form-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,215,0,0.3);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .form-item:hover {
            background: rgba(255,215,0,0.1);
            border-color: var(--primary);
        }

        .form-icon {
            font-size: 1.2rem;
        }

        .form-name {
            font-size: 0.8rem;
            font-weight: 600;
        }

        .form-desc {
            font-size: 0.65rem;
            color: var(--text-muted);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¥Ø¶Ø§ÙØ© Ø­Ø§ÙÙ„Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .add-bus-section {
            background: rgba(0,0,0,0.3);
            border: 1px dashed var(--primary);
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
        }

        .add-bus-input {
            width: 100%;
            padding: 8px;
            background: var(--bg-input);
            border: 1px solid var(--primary);
            border-radius: 4px;
            color: var(--text);
            margin-bottom: 8px;
            font-size: 0.85rem;
        }

        .add-bus-input::placeholder {
            color: var(--text-muted);
        }

        .spot-actions {
            display: flex;
            gap: 5px;
            margin-top: 8px;
        }

        .spot-actions .panel-btn {
            flex: 1;
            padding: 6px;
            font-size: 0.75rem;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .bus-list {
            max-height: 350px;
            overflow-y: auto;
        }

        .bus-card {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,215,0,0.3);
            border-radius: 6px;
            padding: 8px;
            margin-bottom: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .bus-card:hover {
            background: rgba(255,215,0,0.1);
            border-color: var(--primary);
        }

        .bus-card.early { border-right: 3px solid var(--green); }
        .bus-card.ontime { border-right: 3px solid var(--blue); }
        .bus-card.late { border-right: 3px solid var(--red); }
        .bus-card.completed { border-right: 3px solid var(--green); background: rgba(76,175,80,0.1); }

        .bus-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .bus-card-plate {
            font-weight: 700;
            color: var(--primary);
            font-size: 0.85rem;
        }

        .bus-card-badge {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.6rem;
            font-weight: 700;
        }

        .bus-card-badge.early { background: var(--green); color: #fff; }
        .bus-card-badge.ontime { background: var(--blue); color: #fff; }
        .bus-card-badge.late { background: var(--red); color: #fff; }
        .bus-card-badge.completed { background: var(--green); color: #fff; }

        .bus-card-info {
            font-size: 0.7rem;
            color: var(--text-muted);
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .bus-card-progress {
            height: 4px;
            background: var(--bg-input);
            border-radius: 2px;
            margin-top: 5px;
            overflow: hidden;
        }

        .bus-card-progress-fill {
            height: 100%;
            background: var(--green);
            border-radius: 2px;
            transition: width 0.3s;
        }

        .forms-badges {
            display: flex;
            gap: 3px;
            margin-top: 5px;
        }

        .form-badge {
            width: 18px;
            height: 18px;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.5rem;
            background: var(--bg-input);
            color: var(--text-muted);
        }

        .form-badge.completed { background: var(--green); color: #fff; }
        .form-badge.pending { background: var(--orange); color: #fff; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
        }

        .modal-overlay.active { display: flex; }

        .modal {
            background: var(--bg-card);
            border: 2px solid var(--primary);
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(255,215,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 2px solid var(--primary);
            background: rgba(255,215,0,0.1);
        }

        .modal-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-close:hover { color: var(--red); }

        .modal-body {
            padding: 15px;
        }

        .modal-footer {
            display: flex;
            gap: 10px;
            padding: 15px;
            border-top: 1px solid rgba(255,215,0,0.3);
        }

        .modal-footer .panel-btn { margin-top: 0; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .form-group {
            margin-bottom: 12px;
        }

        .form-label {
            display: block;
            font-size: 0.8rem;
            color: var(--primary);
            margin-bottom: 5px;
            font-weight: 600;
        }

        .form-label.required::after {
            content: ' *';
            color: var(--red);
        }

        .form-input {
            width: 100%;
            padding: 10px;
            background: var(--bg-input);
            border: 1px solid rgba(255,215,0,0.3);
            border-radius: 6px;
            color: var(--text);
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(255,215,0,0.3);
        }

        .form-select {
            width: 100%;
            padding: 10px;
            background: var(--bg-input);
            border: 1px solid rgba(255,215,0,0.3);
            border-radius: 6px;
            color: var(--text);
            font-size: 0.9rem;
            cursor: pointer;
        }

        .form-row {
            display: flex;
            gap: 10px;
        }

        .form-row .form-group { flex: 1; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù‚Ø§Ø¦Ù…Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .forms-menu {
            position: fixed;
            background: var(--bg-card);
            border: 2px solid var(--primary);
            border-radius: 10px;
            padding: 10px;
            width: 220px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.8);
            z-index: 2500;
            display: none;
        }

        .forms-menu.active { display: block; }

        .forms-menu-title {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--primary);
            padding: 5px;
            margin-bottom: 5px;
            border-bottom: 1px solid rgba(255,215,0,0.3);
        }

        .forms-menu-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .forms-menu-item:hover {
            background: rgba(255,215,0,0.1);
        }

        .forms-menu-item-icon { font-size: 1.2rem; }
        .forms-menu-item-name { font-size: 0.8rem; flex: 1; }
        .forms-menu-item-status { font-size: 0.8rem; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù‚Ø³Ù… Ø§Ù„Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù… â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .gates-advanced {
            margin-top: 20px;
        }

        .gate-section {
            background: rgba(0,0,0,0.3);
            border: 2px solid var(--primary);
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .gate-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: rgba(255,215,0,0.1);
            border-bottom: 1px solid var(--primary);
            border-radius: 8px 8px 0 0;
        }

        .gate-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .gate-stats-mini {
            display: flex;
            gap: 10px;
            font-size: 0.75rem;
        }

        .gate-stats-mini span { padding: 2px 6px; border-radius: 4px; }
        .gate-stats-mini .early { background: var(--green); }
        .gate-stats-mini .ontime { background: var(--blue); }
        .gate-stats-mini .late { background: var(--red); }

        .gate-buses-list {
            padding: 10px;
            max-height: 250px;
            overflow-y: auto;
        }

        .gate-bus-card {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: rgba(0,0,0,0.3);
            border-radius: 6px;
            margin-bottom: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .gate-bus-card:hover {
            background: rgba(255,215,0,0.1);
            transform: translateX(-5px);
        }

        .gate-bus-card.early { border-right: 3px solid var(--green); }
        .gate-bus-card.ontime { border-right: 3px solid var(--blue); }
        .gate-bus-card.late { border-right: 3px solid var(--red); animation: pulse-red 0.7s infinite; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø²Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .toggle-btn {
            position: fixed;
            top: 120px;
            left: var(--panel-width);
            background: var(--primary);
            color: #000;
            padding: 15px 8px;
            cursor: pointer;
            z-index: 1001;
            border-radius: 0 8px 8px 0;
            font-weight: 700;
            writing-mode: vertical-rl;
            transition: all 0.3s;
            font-size: 0.8rem;
            border: none;
        }

        .toggle-btn:hover { padding-left: 15px; }
        .toggle-btn.shifted { left: 0; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø²Ø± Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .fullscreen-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--primary);
            color: #000;
            border: none;
            padding: 12px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            z-index: 999;
            transition: all 0.3s;
        }

        .fullscreen-btn:hover { transform: scale(1.1); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù…ÙØªØ§Ø­ Ø§Ù„Ø£Ù„ÙˆØ§Ù† â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 8px;
            background: rgba(0,0,0,0.3);
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .legend-color.green { background: var(--green); }
        .legend-color.blue { background: var(--blue); }
        .legend-color.red { background: var(--red); }
        .legend-color.empty { background: #333; border: 1px solid #555; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„ØªØ°ÙŠÙŠÙ„ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .footer {
            background: linear-gradient(180deg, #1a1a1a, #0a0a0a);
            border-top: 3px solid var(--primary);
            padding: 10px;
            text-align: center;
            font-size: 0.8rem;
            color: var(--primary);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .tooltip {
            position: fixed;
            background: rgba(0,0,0,0.95);
            border: 2px solid var(--primary);
            padding: 12px;
            border-radius: 8px;
            pointer-events: none;
            z-index: 2000;
            display: none;
            min-width: 200px;
            box-shadow: 0 10px 40px rgba(255,215,0,0.3);
        }

        .tooltip-title {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--primary);
        }

        .tooltip-row {
            font-size: 0.8rem;
            margin: 4px 0;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .notifications {
            position: fixed;
            top: 80px;
            left: 20px;
            z-index: 1500;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .notification {
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 0.85rem;
            animation: slideIn 0.4s ease;
            border-right: 4px solid;
            backdrop-filter: blur(10px);
            min-width: 280px;
        }

        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.success { background: rgba(76,175,80,0.2); border-color: var(--green); }
        .notification.warning { background: rgba(255,152,0,0.2); border-color: var(--orange); }
        .notification.error { background: rgba(244,67,54,0.2); border-color: var(--red); }
        .notification.info { background: rgba(33,150,243,0.2); border-color: var(--blue); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„ØªØ¬Ø§ÙˆØ¨ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 1200px) {
            .parking-grid { grid-template-columns: repeat(7, 1fr); }
            .parking-grid.exit-grid { grid-template-columns: repeat(9, 1fr); }
            .gates-grid { grid-template-columns: repeat(5, 1fr); }
        }

        @media (max-width: 768px) {
            .header { flex-direction: column; text-align: center; }
            .control-panel { width: 100%; position: fixed; bottom: 0; height: 50vh; }
            .parking-grid { grid-template-columns: repeat(4, 1fr); }
            .parking-grid.exit-grid { grid-template-columns: repeat(5, 1fr); }
        }
    </style>
</head>
<body>
    <!-- Ø²Ø± Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ -->
    <button class="toggle-btn" id="toggleBtn" onclick="togglePanel()">Ø§Ù„ØªØ­ÙƒÙ…</button>

    <!-- Ø²Ø± Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© -->
    <button class="fullscreen-btn" onclick="toggleFullscreen()">â›¶ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©</button>

    <!-- Ø§Ù„Ø±Ø£Ø³ÙŠØ© -->
    <header class="header">
        <div class="header-title">Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø³Ø§Ø­Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© ÙˆØ§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª</div>
        <div class="header-company">JEDCO</div>
        <div class="header-info">
            <div class="info-box">
                <div class="info-box-label">Ø§Ù„ÙˆÙ‚Øª</div>
                <div class="info-box-value" id="currentTime">--:--:--</div>
            </div>
            <div class="info-box" id="shiftBox">
                <div class="info-box-label">Ø§Ù„Ù†ÙˆØ¨Ø©</div>
                <div class="info-box-value" id="currentShift">-</div>
            </div>
            <div class="info-box">
                <div class="info-box-label">Ø§Ù„ØªØ§Ø±ÙŠØ®</div>
                <div class="info-box-value" id="currentDate">----/--/--</div>
            </div>
        </div>
    </header>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ­Ø¯ -->
    <div class="unified-stats-bar">
        <!-- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© -->
        <div class="stats-group">
            <div class="mini-stat" onclick="filterBuses('all')"><span class="mini-label">Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª</span><div class="mini-box"><span class="mini-value" id="totalBuses">0</span></div></div>
            <div class="mini-stat green" onclick="filterBuses('early')"><span class="mini-label">Ù…Ø¨ÙƒØ±</span><div class="mini-box"><span class="mini-value" id="earlyBuses">0</span></div></div>
            <div class="mini-stat blue" onclick="filterBuses('ontime')"><span class="mini-label">Ù…ÙˆØ¹Ø¯</span><div class="mini-box"><span class="mini-value" id="ontimeBuses">0</span></div></div>
            <div class="mini-stat red" onclick="filterBuses('late')"><span class="mini-label">Ù…ØªØ£Ø®Ø±</span><div class="mini-box"><span class="mini-value" id="lateBuses">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø±ÙƒØ§Ø¨</span><div class="mini-box"><span class="mini-value" id="totalPax">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø±Ø­Ù„Ø§Øª</span><div class="mini-box"><span class="mini-value" id="totalFlights">0</span></div></div>
        </div>
        <div class="stats-divider"></div>
        <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ… -->
        <div class="stats-group">
            <div class="mini-stat"><span class="mini-label">Ø§Ù„ÙŠÙˆÙ…</span><div class="mini-box"><span class="mini-value" id="dailyBuses">0</span></div></div>
            <div class="mini-stat green"><span class="mini-label">Ù…Ø¨ÙƒØ±</span><div class="mini-box"><span class="mini-value" id="dailyEarly">0</span></div></div>
            <div class="mini-stat blue"><span class="mini-label">Ù…ÙˆØ¹Ø¯</span><div class="mini-box"><span class="mini-value" id="dailyOntime">0</span></div></div>
            <div class="mini-stat red"><span class="mini-label">Ù…ØªØ£Ø®Ø±</span><div class="mini-box"><span class="mini-value" id="dailyLate">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø±ÙƒØ§Ø¨</span><div class="mini-box"><span class="mini-value" id="dailyPax">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø±Ø­Ù„Ø§Øª</span><div class="mini-box"><span class="mini-value" id="dailyFlights">0</span></div></div>
        </div>
        <div class="stats-divider"></div>
        <!-- Ø­Ø§ÙÙ„Ø§Øª Ø§Ù„ØªØ£Ø´ÙŠØ±Ø§Øª -->
        <div class="stats-group">
            <div class="mini-stat"><span class="mini-label">Ø­Ø¬</span><div class="mini-box"><span class="mini-value" id="visaHajj">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø¹Ù…Ø±Ø©</span><div class="mini-box"><span class="mini-value" id="visaUmrah">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø²ÙŠØ§Ø±Ø©</span><div class="mini-box"><span class="mini-value" id="visaVisit">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø³ÙŠØ§Ø­Ø©</span><div class="mini-box"><span class="mini-value" id="visaTourism">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø®Ù„ÙŠØ¬ÙŠ</span><div class="mini-box"><span class="mini-value" id="visaGCC">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø¹Ù…Ù„</span><div class="mini-box"><span class="mini-value" id="visaWork">0</span></div></div>
        </div>
        <div class="stats-divider"></div>
        <!-- Ø±ÙƒØ§Ø¨ Ø§Ù„ØªØ£Ø´ÙŠØ±Ø§Øª -->
        <div class="stats-group">
            <div class="mini-stat"><span class="mini-label">Ø±ÙƒØ§Ø¨ Ø­Ø¬</span><div class="mini-box"><span class="mini-value" id="visaPaxHajj">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø±ÙƒØ§Ø¨ Ø¹Ù…Ø±Ø©</span><div class="mini-box"><span class="mini-value" id="visaPaxUmrah">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø±ÙƒØ§Ø¨ Ø²ÙŠØ§Ø±Ø©</span><div class="mini-box"><span class="mini-value" id="visaPaxVisit">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø±ÙƒØ§Ø¨ Ø³ÙŠØ§Ø­Ø©</span><div class="mini-box"><span class="mini-value" id="visaPaxTourism">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø±ÙƒØ§Ø¨ Ø®Ù„ÙŠØ¬ÙŠ</span><div class="mini-box"><span class="mini-value" id="visaPaxGCC">0</span></div></div>
            <div class="mini-stat"><span class="mini-label">Ø±ÙƒØ§Ø¨ Ø¹Ù…Ù„</span><div class="mini-box"><span class="mini-value" id="visaPaxWork">0</span></div></div>
        </div>
    </div>

    <!-- Ù…ÙØªØ§Ø­ Ø§Ù„Ø£Ù„ÙˆØ§Ù† -->
    <div class="legend">
        <div class="legend-item"><div class="legend-color green"></div><span>Ù…Ø¨ÙƒØ± (> 7 Ø³Ø§Ø¹Ø§Øª)</span></div>
        <div class="legend-item"><div class="legend-color blue"></div><span>ÙÙŠ Ø§Ù„Ù…ÙˆØ¹Ø¯ (3-7 Ø³Ø§Ø¹Ø§Øª)</span></div>
        <div class="legend-item"><div class="legend-color red"></div><span>Ù…ØªØ£Ø®Ø± (< 3 Ø³Ø§Ø¹Ø§Øª)</span></div>
        <div class="legend-item"><div class="legend-color empty"></div><span>ÙØ§Ø±Øº</span></div>
    </div>

    <!-- Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="main-container">
        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
        <div class="content-area">
            <!-- Ø¥Ø·Ø§Ø± Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ø«Ø§Ø¨Øª -->
            <div class="parking-wrapper" id="parkingWrapper">
                <div class="parking-wrapper-title">ğŸšŒ Ø³Ø§Ø­Ø© Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª ğŸšŒ</div>
                <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© -->
                <div class="parking-inner" id="parkingInner">
                    <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ø£ÙÙ‚ÙŠØ© -->
                    <div class="parking-container" id="parkingContainer">
                        <!-- Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¯Ø®Ù„ -->
                        <div class="parking-section">
                            <div class="section-title">Ø¬Ù‡Ø© Ø§Ù„Ù…Ø¯Ø®Ù„ (42 Ù…ÙˆÙ‚Ù)</div>
                            <div class="parking-grid" id="entranceGrid"></div>
                        </div>

                        <!-- Ø¬Ù‡Ø© Ø§Ù„Ù…Ø®Ø±Ø¬ -->
                        <div class="parking-section">
                            <div class="section-title">Ø¬Ù‡Ø© Ø§Ù„Ù…Ø®Ø±Ø¬ (45 Ù…ÙˆÙ‚Ù)</div>
                            <div class="parking-grid exit-grid" id="exitGrid"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ø¨ÙˆØ§Ø¨Ø§Øª -->
            <div class="gates-section">
                <div class="section-title">Ø¨ÙˆØ§Ø¨Ø§Øª ØµØ§Ù„Ø© Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©</div>
                <div class="gates-grid" id="gatesGrid"></div>
            </div>
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
        <div class="control-panel" id="controlPanel">
            <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
            <div class="panel-tabs">
                <button class="panel-tab active" onclick="showTab('main')" title="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                <button class="panel-tab" onclick="showTab('settings')" title="Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                <button class="panel-tab" onclick="showTab('alerts')" title="Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</button>
                <button class="panel-tab" onclick="showTab('kpis')" title="Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª">Ù…Ø¤Ø´Ø±Ø§Øª</button>
                <button class="panel-tab" onclick="showTab('forms')" title="Ø§Ù„Ù†Ù…Ø§Ø°Ø¬">Ù†Ù…Ø§Ø°Ø¬</button>
                <button class="panel-tab" onclick="showTab('registered')" title="Ø§Ù„Ù…Ø³Ø¬Ù„Ø©">Ù…Ø³Ø¬Ù„Ø©</button>
                <button class="panel-tab" onclick="showTab('segregation')" title="Ø§Ù„ÙØ±Ø²">ÙØ±Ø²</button>
                <button class="panel-tab" onclick="showTab('departed')" title="ØºØ§Ø¯Ø±Øª">ØºØ§Ø¯Ø±Øª</button>
            </div>

            <!-- Tab 1: Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
            <div class="tab-content active" id="tab-main">
                <div class="panel-section">
                    <div class="panel-title">Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</div>
                    <div class="panel-stat"><span>Ø§Ù„Ù…ÙˆØ§Ù‚Ù:</span><span class="panel-stat-value">87</span></div>
                    <div class="panel-stat"><span>Ù…Ø´ØºÙˆÙ„:</span><span class="panel-stat-value" id="panelOccupied">0</span></div>
                    <div class="panel-stat"><span>ÙØ§Ø±Øº:</span><span class="panel-stat-value" id="panelEmpty">87</span></div>
                    <div class="panel-stat"><span>Ù…Ø¨ÙƒØ±:</span><span class="panel-stat-value" style="color:var(--green)" id="panelEarly">0</span></div>
                    <div class="panel-stat"><span>Ù…ÙˆØ¹Ø¯:</span><span class="panel-stat-value" style="color:var(--blue)" id="panelOntime">0</span></div>
                    <div class="panel-stat"><span>Ù…ØªØ£Ø®Ø±:</span><span class="panel-stat-value" style="color:var(--red)" id="panelLate">0</span></div>
                </div>

                <div class="panel-section">
                    <div class="panel-title">Ø§Ù„ØªÙƒØ¨ÙŠØ±</div>
                    <div style="display:flex;gap:5px;">
                        <button class="panel-btn primary" onclick="zoomOut()" style="flex:1">â–</button>
                        <button class="panel-btn primary" onclick="zoomReset()" style="flex:1" id="zoomLevel">100%</button>
                        <button class="panel-btn primary" onclick="zoomIn()" style="flex:1">â•</button>
                    </div>
                    <div class="panel-section">
                    <div class="panel-title">Ø­Ø¬Ù… Ø§Ù„Ù…ÙˆØ§Ù‚Ù</div>
                    <div style="display:flex;gap:5px;">
                        <button class="panel-btn primary" onclick="spotSizeOut()" style="flex:1">â–</button>
                        <button class="panel-btn primary" style="flex:1" id="spotSizeLevel">55px</button>
                        <button class="panel-btn primary" onclick="spotSizeIn()" style="flex:1">â•</button>
                    </div>
                    <input type="range" min="40" max="100" value="55" style="width:100%;margin-top:8px;" onchange="setSpotSize(this.value)" id="spotSizeSlider">
                </div>
                    <input type="range" min="50" max="150" value="100" style="width:100%;margin-top:8px;" onchange="setZoom(this.value)" id="zoomSlider">
                </div>

                <div class="panel-section">
                    <div class="panel-title">Ø§Ù„ØªØ­Ø±ÙŠØ±</div>
                    <button class="panel-btn success" onclick="toggleEditMode()" id="editBtn">ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ØªØ­Ø±ÙŠØ±</button>
                    
                    <div class="add-bus-section">
                        <div style="font-size:0.8rem;color:var(--primary);margin-bottom:8px;">Ø¥Ø¶Ø§ÙØ© Ø­Ø§ÙÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</div>
                        <input type="number" class="add-bus-input" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆÙ‚Ù (1-87)" id="newSpotNumber" min="1" max="87">
                        <button class="panel-btn primary" onclick="addNewBus()">Ø¥Ø¶Ø§ÙØ© Ø­Ø§ÙÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                    </div>

                    <div id="spotActions" style="display:none;margin-top:10px;">
                        <div style="font-size:0.8rem;color:var(--primary);margin-bottom:8px;">Ø§Ù„Ù…ÙˆÙ‚Ù Ø§Ù„Ù…Ø­Ø¯Ø¯: <span id="selectedSpotNum">-</span></div>
                        <div class="spot-actions">
                            <button class="panel-btn info" onclick="editSpot()">ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="panel-btn primary" onclick="moveSpot()">Ù†Ù‚Ù„</button>
                            <button class="panel-btn danger" onclick="deleteSpot()">Ø­Ø°Ù</button>
                        </div>
                    </div>
                </div>

                <div class="panel-section">
                    <div class="panel-title">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
                    <button class="panel-btn primary" onclick="exportJSON()">ØªØµØ¯ÙŠØ± JSON</button>
                    <button class="panel-btn info" onclick="exportCSV()">ØªØµØ¯ÙŠØ± CSV</button>
                    <button class="panel-btn primary" onclick="document.getElementById('importFile').click()">Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
                    <input type="file" id="importFile" accept=".json" style="display:none" onchange="importJSON(event)">
                    <button class="panel-btn danger" onclick="resetAll()">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
                    <button class="panel-btn warning" onclick="clearAllData()">ØªØµÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                    <button class="panel-btn" style="background:linear-gradient(135deg,#9c27b0,#ba68c8);" onclick="loadTestData()">ØªØ­Ù…ÙŠÙ„ 20 Ø­Ø§ÙÙ„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©</button>
                </div>
            </div>

            <!-- Tab 2: Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
            <div class="tab-content" id="tab-settings">
                <div class="panel-section">
                    <div class="panel-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆÙ‚Øª</div>
                    <div class="setting-row">
                        <span class="setting-label">Ø­Ø¯ Ø§Ù„Ù…Ø¨ÙƒØ± (Ø³Ø§Ø¹Ø©)</span>
                        <input type="number" class="setting-input" value="7" min="1" max="24" id="earlyThreshold" onchange="updateThresholds()">
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">Ø­Ø¯ Ø§Ù„Ù…ØªØ£Ø®Ø± (Ø³Ø§Ø¹Ø©)</span>
                        <input type="number" class="setting-input" value="3" min="1" max="12" id="lateThreshold" onchange="updateThresholds()">
                    </div>
                </div>

                <div class="panel-section">
                    <div class="panel-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù†</div>
                    <div class="setting-row">
                        <span class="setting-label">Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</span>
                        <input type="color" class="color-picker" value="#ffd700" id="colorPrimary" onchange="updateColors()">
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">Ù„ÙˆÙ† Ø§Ù„Ù…Ø¨ÙƒØ±</span>
                        <input type="color" class="color-picker" value="#4caf50" id="colorEarly" onchange="updateColors()">
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">Ù„ÙˆÙ† ÙÙŠ Ø§Ù„Ù…ÙˆØ¹Ø¯</span>
                        <input type="color" class="color-picker" value="#2196f3" id="colorOntime" onchange="updateColors()">
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">Ù„ÙˆÙ† Ø§Ù„Ù…ØªØ£Ø®Ø±</span>
                        <input type="color" class="color-picker" value="#f44336" id="colorLate" onchange="updateColors()">
                    </div>
                </div>

                <div class="panel-section">
                    <div class="panel-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</div>
                    <div class="setting-row">
                        <span class="setting-label">ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª</span>
                        <div class="setting-toggle" id="soundToggle" onclick="toggleSetting('sound')"></div>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù†Ø¨Ø«Ù‚Ø©</span>
                        <div class="setting-toggle active" id="notifToggle" onclick="toggleSetting('notif')"></div>
                    </div>
                    <div class="setting-row">
                        <span class="setting-label">ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ</span>
                        <div class="setting-toggle active" id="autoRefreshToggle" onclick="toggleSetting('autoRefresh')"></div>
                    </div>
                </div>

                <div class="panel-section">
                    <div class="panel-title">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø±Ø¶</div>
                    <div class="setting-row">
                        <span class="setting-label">Ø­Ø¬Ù… Ø§Ù„Ù…ÙˆØ§Ù‚Ù (px)</span>
                        <input type="number" class="setting-input" value="80" min="60" max="120" id="spotSize" onchange="updateSpotSize()">
                    </div>
                </div>

                <div class="panel-section">
                    <button class="panel-btn success" onclick="saveSettings()">Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                    <button class="panel-btn primary" onclick="loadSettings()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                    <button class="panel-btn danger" onclick="resetSettings()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†</button>
                </div>
            </div>

            <!-- Tab 3: Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª -->
            <div class="tab-content" id="tab-alerts">
                <div class="panel-section">
                    <div class="panel-title" style="display:flex;justify-content:space-between;align-items:center;">
                        <span>Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© (<span id="alertsCount">0</span>)</span>
                    </div>
                    <div style="display:flex;gap:5px;margin-bottom:10px;">
                        <button class="panel-btn danger" onclick="clearAlerts()" style="flex:1;padding:6px;font-size:0.75rem;">Ù…Ø³Ø­</button>
                        <button class="panel-btn info" onclick="testAlert()" style="flex:1;padding:6px;font-size:0.75rem;">Ø§Ø®ØªØ¨Ø§Ø±</button>
                    </div>
                    <div class="alerts-list" id="alertsList">
                        <div style="text-align:center;color:var(--text-muted);padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</div>
                    </div>
                </div>
            </div>

            <!-- Tab 4: Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ -->
            <div class="tab-content" id="tab-kpis">
                <div class="panel-section">
                    <div class="panel-title">Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</div>
                    
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpiOccupancy">0%</div>
                        <div class="kpi-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ø´ØºØ§Ù„</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="occupancyBar" style="width:0%;background:var(--blue);"></div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-value" id="kpiAvgWait">0</div>
                        <div class="kpi-label">Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± (Ø¯Ù‚ÙŠÙ‚Ø©)</div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-label" style="margin-bottom:5px;">ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</div>
                        <div class="chart-bars">
                            <div class="chart-bar" id="barEarly" style="height:30%;background:var(--green);">
                                <span class="chart-bar-label">Ù…Ø¨ÙƒØ±</span>
                            </div>
                            <div class="chart-bar" id="barOntime" style="height:40%;background:var(--blue);">
                                <span class="chart-bar-label">Ù…ÙˆØ¹Ø¯</span>
                            </div>
                            <div class="chart-bar" id="barLate" style="height:30%;background:var(--red);">
                                <span class="chart-bar-label">Ù…ØªØ£Ø®Ø±</span>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-value" id="kpiOnTimeRate">0%</div>
                        <div class="kpi-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙÙˆÙŠØ¬ Ø¨Ø§Ù„Ù…ÙˆØ¹Ø¯</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="onTimeBar" style="width:0%;background:var(--green);"></div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-value" id="kpiAvgPax">0</div>
                        <div class="kpi-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø±ÙƒØ§Ø¨/Ø­Ø§ÙÙ„Ø©</div>
                    </div>

                    <div class="kpi-card">
                        <div class="kpi-value" id="kpiPeakOccupancy">0%</div>
                        <div class="kpi-label">Ø°Ø±ÙˆØ© Ø§Ù„Ø¥Ø´ØºØ§Ù„ Ø§Ù„ÙŠÙˆÙ…</div>
                    </div>

                    <div style="display:flex;gap:8px;">
                        <div class="kpi-card" style="flex:1;">
                            <div class="kpi-value" id="kpiBusesToday">0</div>
                            <div class="kpi-label">Ø­Ø§ÙÙ„Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                        </div>
                        <div class="kpi-card" style="flex:1;">
                            <div class="kpi-value" id="kpiPaxToday">0</div>
                            <div class="kpi-label">Ù…Ø³Ø§ÙØ±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 5: Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ -->
            <div class="tab-content" id="tab-forms">
                <div class="panel-section">
                    <div class="panel-title">Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…ØªØ§Ø­Ø©</div>
                    <div class="form-list">
                        <div class="form-item" onclick="openForm('ScrLogIn')">
                            <span class="form-icon">1</span>
                            <div>
                                <div class="form-name">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
                                <div class="form-desc">ScrLogIn - Ø§Ø®ØªÙŠØ§Ø± Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù…Ù„</div>
                            </div>
                        </div>
                        <div class="form-item" onclick="openForm('ScrSegregationIn')">
                            <span class="form-icon">2</span>
                            <div>
                                <div class="form-name">Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙØµÙ„</div>
                                <div class="form-desc">ScrSegregationIn - ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª</div>
                            </div>
                        </div>
                        <div class="form-item" onclick="openForm('ScrWelcomeLounge')">
                            <span class="form-icon">3</span>
                            <div>
                                <div class="form-name">ØµØ§Ù„Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</div>
                                <div class="form-desc">ScrWelcomeLounge - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ù‚Ù</div>
                            </div>
                        </div>
                        <div class="form-item" onclick="openForm('ScrSegregationExit')">
                            <span class="form-icon">4</span>
                            <div>
                                <div class="form-name">Ø®Ø±ÙˆØ¬ Ø§Ù„ÙØµÙ„</div>
                                <div class="form-desc">ScrSegregationExit - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
                            </div>
                        </div>
                        <div class="form-item" onclick="openForm('ScrCurbside')">
                            <span class="form-icon">5</span>
                            <div>
                                <div class="form-name">Ø§Ù„Ø±ØµÙŠÙ</div>
                                <div class="form-desc">ScrCurbside - Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØµØ¹ÙˆØ¯</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 6: Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø© -->
            <div class="tab-content" id="tab-registered">
                <div class="panel-section">
                    <div class="panel-title">Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø© (<span id="registeredCount">0</span>)</div>
                    <div class="bus-list" id="registeredList">
                        <div style="text-align:center;color:var(--text-muted);padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§ÙÙ„Ø§Øª Ù…Ø³Ø¬Ù„Ø©</div>
                    </div>
                </div>
            </div>

            <!-- Tab 7: ScrSegregationIn -->
            <div class="tab-content" id="tab-segregation">
                <div class="panel-section">
                    <div class="panel-title">Ø­Ø§ÙÙ„Ø§Øª Ø§Ù„ÙØ±Ø² (<span id="segregationCount">0</span>)</div>
                    <div class="bus-list" id="segregationList">
                        <div style="text-align:center;color:var(--text-muted);padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§ÙÙ„Ø§Øª ÙÙŠ Ø§Ù„ÙØ±Ø²</div>
                    </div>
                </div>
            </div>

            <!-- Tab 8: Ø­Ø§ÙÙ„Ø§Øª ØºØ§Ø¯Ø±Øª -->
            <div class="tab-content" id="tab-departed">
                <div class="panel-section">
                    <div class="panel-title">Ø­Ø§ÙÙ„Ø§Øª ØºØ§Ø¯Ø±Øª (<span id="departedCount">0</span>)</div>
                    <div style="display:flex;gap:5px;margin-bottom:10px;">
                        <div class="kpi-card" style="flex:1;padding:5px;">
                            <div class="kpi-value" style="font-size:1rem;" id="departedToday">0</div>
                            <div class="kpi-label">Ø§Ù„ÙŠÙˆÙ…</div>
                        </div>
                        <div class="kpi-card" style="flex:1;padding:5px;">
                            <div class="kpi-value" style="font-size:1rem;" id="departedPax">0</div>
                            <div class="kpi-label">Ø§Ù„Ø±ÙƒØ§Ø¨</div>
                        </div>
                    </div>
                    <div class="bus-list" id="departedList">
                        <div style="text-align:center;color:var(--text-muted);padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§ÙÙ„Ø§Øª ØºØ§Ø¯Ø±Øª</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„ØªØ°ÙŠÙŠÙ„ -->
    <footer class="footer">
        Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø³Ø§Ø­Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© ÙˆØ§Ù„Ù…ÙˆØ§ØµÙ„Ø§Øª v3.0 | LOCC System | Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: <span id="lastUpdate">--:--:--</span>
    </footer>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
    <div class="tooltip" id="tooltip"></div>

    <!-- Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div class="notifications" id="notifications"></div>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ -->
    <div class="forms-menu" id="formsMenu">
        <div class="forms-menu-title">Ø§Ø®ØªØ± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</div>
        <div class="forms-menu-item" onclick="selectFormFromMenu('ScrLogIn')">
            <span class="forms-menu-item-icon">1</span>
            <span class="forms-menu-item-name">ScrLogIn</span>
            <span class="forms-menu-item-status" id="formStatus1">-</span>
        </div>
        <div class="forms-menu-item" onclick="selectFormFromMenu('ScrSegregationIn')">
            <span class="forms-menu-item-icon">2</span>
            <span class="forms-menu-item-name">ScrSegregationIn</span>
            <span class="forms-menu-item-status" id="formStatus2">-</span>
        </div>
        <div class="forms-menu-item" onclick="selectFormFromMenu('ScrWelcomeLounge')">
            <span class="forms-menu-item-icon">3</span>
            <span class="forms-menu-item-name">ScrWelcomeLounge</span>
            <span class="forms-menu-item-status" id="formStatus3">-</span>
        </div>
        <div class="forms-menu-item" onclick="selectFormFromMenu('ScrSegregationExit')">
            <span class="forms-menu-item-icon">4</span>
            <span class="forms-menu-item-name">ScrSegregationExit</span>
            <span class="forms-menu-item-status" id="formStatus4">-</span>
        </div>
        <div class="forms-menu-item" onclick="selectFormFromMenu('ScrCurbside')">
            <span class="forms-menu-item-icon">5</span>
            <span class="forms-menu-item-name">ScrCurbside</span>
            <span class="forms-menu-item-status" id="formStatus5">-</span>
        </div>
    </div>

    <!-- Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ù„Ù†Ù…Ø§Ø°Ø¬ -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModalOnOverlay(event)">
        <div class="modal" id="formModal">
            <div class="modal-header">
                <span class="modal-title" id="modalTitle">Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</span>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙŠÙØ­Ù‚Ù† Ù‡Ù†Ø§ -->
            </div>
            <div class="modal-footer">
                <button class="panel-btn primary" onclick="saveFormData()" style="flex:1;">ğŸ’¾ Ø­ÙØ¸</button>
                <button class="panel-btn danger" onclick="closeModal()" style="flex:1;">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let busData = [];
        let busRecords = [];
        let departedBuses = [];
        let gateStats = {};
        let dailyStats = { buses: 0, pax: 0, early: 0, ontime: 0, late: 0, flights: new Set() };
        let zoomLevel = 100;
        let editMode = false;
        let panelVisible = true;
        let thresholds = { early: 7, late: 3 };
        let currentSpotForForm = null;
        let currentBusForForm = null;
        let currentFormName = null;

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ø¨ÙˆØ§Ø¨Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        const gates = ['A1', 'A2', 'B1', 'B2', 'C1', 'C2', 'D1', 'D2', 'E1', 'E2'];

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function init() {
            loadData();
            loadSettings();
            
            // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª
            if (busData.length === 0) {
                loadTestData();
            }
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ù‚Ù ÙˆØ§Ù„Ø¨ÙˆØ§Ø¨Ø§Øª Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            renderParkingGrid('entranceGrid', 1, 42);
            renderParkingGrid('exitGrid', 43, 87);
            renderGates();
            updateStats();
            updateKPIs();
            updateBusLists();
            updateTime();
            
            setInterval(updateTime, 1000);
            setInterval(updateCountdowns, 1000);
            setInterval(saveData, 30000);
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© - 20 Ø­Ø§ÙÙ„Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function loadTestData() {
            const now = new Date();
            const visaTypes = ['Hajj', 'Umrah', 'Visit', 'Tourism', 'GCC', 'Work'];
            const terminals = ['HT', 'NT', 'T1'];
            const gatesArr = ['A1', 'A2', 'B1', 'B2', 'C1', 'C2', 'D1', 'D2', 'E1', 'E2'];
            
            // 10 Ø­Ø§ÙÙ„Ø§Øª Ù…ØªØ£Ø®Ø±Ø© (ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø© Ù‚Ø¨Ù„ 1-2 Ø³Ø§Ø¹Ø© - Ø£Ù‚Ù„ Ù…Ù† 3 Ø³Ø§Ø¹Ø§Øª)
            for (let i = 1; i <= 10; i++) {
                const hoursAgo = 1 + Math.random() * 2; // 1-3 Ø³Ø§Ø¹Ø§Øª Ù…Ø¶Øª
                const depTime = new Date(now.getTime() - hoursAgo * 60 * 60000);
                busData.push({
                    id: Date.now() + i,
                    plate: `L${1000 + i}SRA`,
                    busNo: 100 + i,
                    flight: `SV${1000 + i}`,
                    pax: 30 + Math.floor(Math.random() * 20),
                    visa: visaTypes[i % 6],
                    terminal: terminals[i % 3],
                    destination: 'Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©',
                    departure: depTime.toISOString(),
                    arrival: new Date(now.getTime() - 8 * 60 * 60000).toISOString(),
                    spot: i,
                    gate: gatesArr[i % 10],
                    forms: { ScrSegregationIn: {}, ScrWelcomeLounge: {} }
                });
                dailyStats.late++;
            }
            
            // 5 Ø­Ø§ÙÙ„Ø§Øª ÙÙŠ Ø§Ù„Ù…ÙˆØ¹Ø¯ (ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø© Ø¨Ø¹Ø¯ 4-6 Ø³Ø§Ø¹Ø§Øª - Ø¨ÙŠÙ† 3 Ùˆ 7 Ø³Ø§Ø¹Ø§Øª)
            for (let i = 11; i <= 15; i++) {
                const hoursLeft = 4 + Math.random() * 2; // 4-6 Ø³Ø§Ø¹Ø§Øª Ù…ØªØ¨Ù‚ÙŠØ©
                const depTime = new Date(now.getTime() + hoursLeft * 60 * 60000);
                busData.push({
                    id: Date.now() + i,
                    plate: `O${1000 + i}SRA`,
                    busNo: 100 + i,
                    flight: `SV${1000 + i}`,
                    pax: 30 + Math.floor(Math.random() * 20),
                    visa: visaTypes[i % 6],
                    terminal: terminals[i % 3],
                    destination: 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©',
                    departure: depTime.toISOString(),
                    arrival: new Date(now.getTime() - 4 * 60 * 60000).toISOString(),
                    spot: i,
                    gate: gatesArr[i % 10],
                    forms: { ScrSegregationIn: {}, ScrWelcomeLounge: {} }
                });
                dailyStats.ontime++;
            }
            
            // 5 Ø­Ø§ÙÙ„Ø§Øª Ù…Ø¨ÙƒØ± (ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø© Ø¨Ø¹Ø¯ 8-12 Ø³Ø§Ø¹Ø© - Ø£ÙƒØ«Ø± Ù…Ù† 7 Ø³Ø§Ø¹Ø§Øª)
            for (let i = 16; i <= 20; i++) {
                const hoursLeft = 8 + Math.random() * 4; // 8-12 Ø³Ø§Ø¹Ø© Ù…ØªØ¨Ù‚ÙŠØ©
                const depTime = new Date(now.getTime() + hoursLeft * 60 * 60000);
                busData.push({
                    id: Date.now() + i,
                    plate: `E${1000 + i}SRA`,
                    busNo: 100 + i,
                    flight: `SV${1000 + i}`,
                    pax: 30 + Math.floor(Math.random() * 20),
                    visa: visaTypes[i % 6],
                    terminal: terminals[i % 3],
                    destination: 'Ø¬Ø¯Ø©',
                    departure: depTime.toISOString(),
                    arrival: new Date(now.getTime() - 2 * 60 * 60000).toISOString(),
                    spot: i,
                    gate: gatesArr[i % 10],
                    forms: { ScrSegregationIn: {}, ScrWelcomeLounge: {} }
                });
                dailyStats.early++;
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            dailyStats.buses = 20;
            dailyStats.pax = busData.reduce((sum, b) => sum + (b.pax || 0), 0);
            busData.forEach(b => dailyStats.flights.add(b.flight));
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            updateStats();
            renderParkingGrid('entranceGrid', 1, 42);
            renderParkingGrid('exitGrid', 43, 87);
            renderGates();
            updateKPIs();
            saveData();
            
            showNotification('success', 'Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©', 'ØªÙ… ØªØ­Ù…ÙŠÙ„ 20 Ø­Ø§ÙÙ„Ø©: 10 Ù…ØªØ£Ø®Ø±Ø©ØŒ 5 ÙÙŠ Ø§Ù„Ù…ÙˆØ¹Ø¯ØŒ 5 Ù…Ø¨ÙƒØ±');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¹Ø±Ø¶ Ø´Ø¨ÙƒØ© Ø§Ù„Ù…ÙˆØ§Ù‚Ù â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function renderParkingGrid(containerId, start, end) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            for (let i = start; i <= end; i++) {
                const spot = document.createElement('div');
                spot.className = 'parking-spot';
                spot.dataset.spot = i;

                const bus = busData.find(b => b.spot === i);

                if (bus) {
                    const status = getStatus(bus.arrival, bus.departure);
                    spot.classList.add(status.class);
                    const countdown = getCountdownString(bus.departure);

                    spot.innerHTML = `
                        <div class="spot-number">#${i}</div>
                        <div class="spot-badge ${status.class}">${status.label}</div>
                        <div class="bus-info">
                            <div class="info-row"><span class="info-icon">B</span>${bus.plate}</div>
                            <div class="info-row"><span class="info-icon">F</span>${bus.flight}</div>
                            <div class="info-row"><span class="info-icon">P</span>${bus.pax || '-'}</div>
                            <div class="info-row"><span class="info-icon">G</span>${bus.gate || '-'}</div>
                        </div>
                        <div class="countdown" style="color:${status.color}">â±ï¸ ${countdown}</div>
                    `;

                    spot.onmouseenter = (e) => showTooltip(e, bus, status, i);
                    spot.onmousemove = moveTooltip;
                    spot.onmouseleave = hideTooltip;
                } else {
                    spot.classList.add('empty');
                    spot.innerHTML = `<div class="spot-number">#${i}</div><div class="empty-text">â€”</div>`;
                }

                spot.onclick = (e) => handleSpotClick(i, bus, e);
                container.appendChild(spot);
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù… â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function renderGates() {
            const container = document.getElementById('gatesGrid');
            container.innerHTML = '';

            gates.forEach(gate => {
                const gateBuses = busData.filter(b => b.gate === gate);
                let early = 0, ontime = 0, late = 0;
                
                gateBuses.forEach(bus => {
                    const status = getStatus(bus.arrival, bus.departure);
                    if (status.class === 'early') early++;
                    else if (status.class === 'ontime') ontime++;
                    else late++;
                });

                const gateSection = document.createElement('div');
                gateSection.className = 'gate-section';
                gateSection.innerHTML = `
                    <div class="gate-header">
                        <span class="gate-title">${gate}</span>
                        <div class="gate-stats-mini">
                            <span class="early">${early}</span>
                            <span class="ontime">${ontime}</span>
                            <span class="late">${late}</span>
                        </div>
                    </div>
                    <div class="gate-buses-list" id="gateList-${gate}">
                        ${gateBuses.length === 0 ? 
                            '<div style="text-align:center;color:var(--text-muted);padding:10px;font-size:0.75rem;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§ÙÙ„Ø§Øª</div>' :
                            gateBuses.map(bus => {
                                const status = getStatus(bus.arrival, bus.departure);
                                const countdown = getCountdownString(bus.departure);
                                return `
                                    <div class="gate-bus-card ${status.class}" onclick="showFormsMenu(event, ${bus.spot})">
                                        <div style="flex:1;">
                                            <div style="font-weight:700;color:var(--primary);">${bus.plate}</div>
                                            <div style="font-size:0.7rem;color:var(--text-muted);">${bus.flight} | ${bus.pax || '-'}</div>
                                        </div>
                                        <div style="text-align:left;font-size:0.75rem;">
                                            <div style="color:${status.color};">${countdown}</div>
                                            <div style="font-size:0.65rem;color:var(--text-muted);">${status.label}</div>
                                        </div>
                                    </div>
                                `;
                            }).join('')
                        }
                    </div>
                `;
                container.appendChild(gateSection);
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø­Ø³Ø§Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function getStatus(arrival, departure) {
            const now = new Date();
            const dep = new Date(departure);
            const diff = (dep - now) / (1000 * 60 * 60);

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ØªØ§Ø±ÙŠØ®
            if (isNaN(diff)) {
                return { class: 'late', label: 'Ù…ØªØ£Ø®Ø±', color: '#f44336', hours: 0 };
            }

            if (diff > thresholds.early) {
                return { class: 'early', label: 'Ù…Ø¨ÙƒØ±', color: '#4caf50', hours: diff };
            } else if (diff >= thresholds.late) {
                return { class: 'ontime', label: 'Ù…ÙˆØ¹Ø¯', color: '#2196f3', hours: diff };
            } else {
                return { class: 'late', label: 'Ù…ØªØ£Ø®Ø±', color: '#f44336', hours: diff };
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ HH:MM:SS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function getCountdownString(departure) {
            if (!departure) return '--:--:--';
            
            const now = new Date();
            const dep = new Date(departure);
            const diff = dep - now;
            
            if (diff <= 0) return 'âš ï¸ Ù…ØªØ£Ø®Ø±!';
            
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const secs = Math.floor((diff % (1000 * 60)) / 1000);
            
            return `${hours.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function updateStats() {
            let early = 0, ontime = 0, late = 0, totalPax = 0;
            const flights = new Set();
            const visaCounts = { Hajj: 0, Umrah: 0, Visit: 0, Tourism: 0, GCC: 0, Work: 0 };
            const visaPaxCounts = { Hajj: 0, Umrah: 0, Visit: 0, Tourism: 0, GCC: 0, Work: 0 };

            busData.forEach(bus => {
                const status = getStatus(bus.arrival, bus.departure);
                if (status.class === 'early') early++;
                else if (status.class === 'ontime') ontime++;
                else late++;

                totalPax += bus.pax || 0;
                if (bus.flight) flights.add(bus.flight);
                if (bus.visa && visaCounts[bus.visa] !== undefined) {
                    visaCounts[bus.visa]++;
                    visaPaxCounts[bus.visa] += bus.pax || 0;
                }
            });

            document.getElementById('totalBuses').textContent = busData.length;
            document.getElementById('earlyBuses').textContent = early;
            document.getElementById('ontimeBuses').textContent = ontime;
            document.getElementById('lateBuses').textContent = late;
            document.getElementById('totalPax').textContent = totalPax.toLocaleString();
            document.getElementById('totalFlights').textContent = flights.size;

            document.getElementById('panelOccupied').textContent = busData.length;
            document.getElementById('panelEmpty').textContent = 87 - busData.length;
            document.getElementById('panelEarly').textContent = early;
            document.getElementById('panelOntime').textContent = ontime;
            document.getElementById('panelLate').textContent = late;

            // Ø§Ù„ØªØ£Ø´ÙŠØ±Ø§Øª - Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª
            document.getElementById('visaHajj').textContent = visaCounts.Hajj;
            document.getElementById('visaUmrah').textContent = visaCounts.Umrah;
            document.getElementById('visaVisit').textContent = visaCounts.Visit;
            document.getElementById('visaTourism').textContent = visaCounts.Tourism;
            document.getElementById('visaGCC').textContent = visaCounts.GCC;
            document.getElementById('visaWork').textContent = visaCounts.Work;

            // Ø§Ù„ØªØ£Ø´ÙŠØ±Ø§Øª - Ø§Ù„Ø±ÙƒØ§Ø¨
            document.getElementById('visaPaxHajj').textContent = visaPaxCounts.Hajj.toLocaleString();
            document.getElementById('visaPaxUmrah').textContent = visaPaxCounts.Umrah.toLocaleString();
            document.getElementById('visaPaxVisit').textContent = visaPaxCounts.Visit.toLocaleString();
            document.getElementById('visaPaxTourism').textContent = visaPaxCounts.Tourism.toLocaleString();
            document.getElementById('visaPaxGCC').textContent = visaPaxCounts.GCC.toLocaleString();
            document.getElementById('visaPaxWork').textContent = visaPaxCounts.Work.toLocaleString();

            // Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
            document.getElementById('dailyBuses').textContent = dailyStats.buses;
            document.getElementById('dailyEarly').textContent = dailyStats.early;
            document.getElementById('dailyOntime').textContent = dailyStats.ontime;
            document.getElementById('dailyLate').textContent = dailyStats.late;
            document.getElementById('dailyPax').textContent = dailyStats.pax.toLocaleString();
            document.getElementById('dailyFlights').textContent = dailyStats.flights.size;

            renderGates();
            updateBusLists();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function updateTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('ar-SA', { hour12: false });
            document.getElementById('currentDate').textContent = now.toLocaleDateString('ar-SA');
            document.getElementById('lastUpdate').textContent = now.toLocaleTimeString('ar-SA', { hour12: false });

            const hour = now.getHours();
            let shift, shiftColor, shiftBg;
            
            if (hour >= 6 && hour < 14) {
                shift = 'A';
                shiftColor = '#4caf50';
                shiftBg = 'rgba(76,175,80,0.2)';
            } else if (hour >= 14 && hour < 22) {
                shift = 'B';
                shiftColor = '#2196f3';
                shiftBg = 'rgba(33,150,243,0.2)';
            } else {
                shift = 'C';
                shiftColor = '#9c27b0';
                shiftBg = 'rgba(156,39,176,0.2)';
            }
            
            const shiftBox = document.getElementById('shiftBox');
            if (shiftBox) {
                shiftBox.style.borderColor = shiftColor;
                shiftBox.style.background = shiftBg;
            }
            document.getElementById('currentShift').textContent = shift;
            document.getElementById('currentShift').style.color = shiftColor;
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ÙƒÙ„ Ø«Ø§Ù†ÙŠØ© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function updateCountdowns() {
            // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ Ù…ÙˆÙ‚Ù Ù…Ø´ØºÙˆÙ„
            busData.forEach(bus => {
                if (!bus.spot) return;
                
                const spotEl = document.querySelector(`.parking-spot[data-spot="${bus.spot}"]`);
                if (spotEl && !spotEl.classList.contains('empty')) {
                    const countdown = getCountdownString(bus.departure);
                    const status = getStatus(bus.arrival, bus.departure);
                    const countdownEl = spotEl.querySelector('.countdown');
                    if (countdownEl) {
                        countdownEl.innerHTML = 'â±ï¸ ' + countdown;
                        countdownEl.style.color = status.color;
                    }
                    
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Ø±Ø©
                    const badgeEl = spotEl.querySelector('.spot-badge');
                    if (badgeEl) {
                        badgeEl.textContent = status.label;
                        badgeEl.className = 'spot-badge ' + status.class;
                    }
                    
                    // ØªØ­Ø¯ÙŠØ« Ù„ÙˆÙ† Ø§Ù„Ù…ÙˆÙ‚Ù
                    spotEl.classList.remove('early', 'ontime', 'late');
                    spotEl.classList.add(status.class);
                }
            });
            
            monitorStatusChanges();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù…Ø±Ø§Ù‚Ø¨Ø© ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function monitorStatusChanges() {
            busData.forEach(bus => {
                const currentStatus = getStatus(bus.arrival, bus.departure);
                const previousStatus = bus.previousStatus || currentStatus.class;
                
                if (currentStatus.class !== previousStatus) {
                    // ØªØºÙŠÙŠØ± Ù…Ù† Ù…Ø¨ÙƒØ± Ø¥Ù„Ù‰ ÙÙŠ Ø§Ù„Ù…ÙˆØ¹Ø¯
                    if (previousStatus === 'early' && currentStatus.class === 'ontime') {
                        showNotification('info', 'ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©', `Ø§Ù„Ø­Ø§ÙÙ„Ø© ${bus.plate} Ø¯Ø®Ù„Øª Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù…Ø­Ø¯Ø¯`);
                        addAlert('info', 'ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø©', `Ø§Ù„Ø­Ø§ÙÙ„Ø© ${bus.plate} Ø£ØµØ¨Ø­Øª ÙÙŠ Ø§Ù„Ù…ÙˆØ¹Ø¯`);
                    }
                    
                    // ØªØºÙŠÙŠØ± Ù…Ù† ÙÙŠ Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø¥Ù„Ù‰ Ù…ØªØ£Ø®Ø±
                    if (previousStatus === 'ontime' && currentStatus.class === 'late') {
                        showNotification('warning', 'ØªÙ†Ø¨ÙŠÙ‡ ØªØ£Ø®ÙŠØ±', `Ø§Ù„Ø­Ø§ÙÙ„Ø© ${bus.plate} Ø£ØµØ¨Ø­Øª Ù…ØªØ£Ø®Ø±Ø©`);
                        addAlert('warning', 'Ø­Ø§ÙÙ„Ø© Ù…ØªØ£Ø®Ø±Ø©', `Ø§Ù„Ø­Ø§ÙÙ„Ø© ${bus.plate} ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù…Ø­Ø¯Ø¯`);
                    }
                    
                    // Ù…ØªØ£Ø®Ø± Ø¬Ø¯Ø§Ù‹ (Ø£Ù‚Ù„ Ù…Ù† Ø³Ø§Ø¹Ø©)
                    if (currentStatus.class === 'late' && currentStatus.hours < 1 && bus.previousHours >= 1) {
                        showNotification('error', 'Ø­Ø±Ø¬', `Ø§Ù„Ø­Ø§ÙÙ„Ø© ${bus.plate} Ù…ØªØ£Ø®Ø±Ø© Ø¬Ø¯Ø§Ù‹`);
                        addAlert('critical', 'Ø­Ø§ÙÙ„Ø© Ù…ØªØ£Ø®Ø±Ø© Ø¬Ø¯Ø§Ù‹', `Ø§Ù„Ø­Ø§ÙÙ„Ø© ${bus.plate} Ù…ØªØ£Ø®Ø±Ø© Ø£Ù‚Ù„ Ù…Ù† Ø³Ø§Ø¹Ø©`);
                        if (settings.sound) playAlertSound();
                    }
                    
                    bus.previousStatus = currentStatus.class;
                }
                bus.previousHours = currentStatus.hours;
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function playAlertSound() {
            try {
                const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleZlHBSNz0+a2blJMVIHO5Lh6c4Nxfo6SqbLAx8TCvrm0');
                audio.volume = 0.5;
                audio.play();
            } catch(e) { console.log('Sound not available'); }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function showTooltip(e, bus, status, spot) {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.display = 'block';
            tooltip.innerHTML = `
                <div class="tooltip-title">Ù…ÙˆÙ‚Ù #${spot}</div>
                <div class="tooltip-row"><b>Ø§Ù„Ù„ÙˆØ­Ø©:</b> ${bus.plate}</div>
                <div class="tooltip-row"><b>Ø§Ù„Ø±Ø­Ù„Ø©:</b> ${bus.flight}</div>
                <div class="tooltip-row"><b>Ø§Ù„Ø±ÙƒØ§Ø¨:</b> ${bus.pax || '-'}</div>
                <div class="tooltip-row"><b>Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©:</b> ${bus.gate || '-'}</div>
                <div class="tooltip-row"><b>Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©:</b> ${bus.departure}</div>
                <div class="tooltip-row"><b>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</b> ${getCountdownString(bus.departure)}</div>
                <div class="tooltip-row" style="color:${status.color}"><b>Ø§Ù„Ø­Ø§Ù„Ø©:</b> ${status.label}</div>
            `;
            moveTooltip(e);
        }

        function moveTooltip(e) {
            const tooltip = document.getElementById('tooltip');
            tooltip.style.left = (e.pageX + 15) + 'px';
            tooltip.style.top = (e.pageY + 15) + 'px';
        }

        function hideTooltip() {
            document.getElementById('tooltip').style.display = 'none';
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø± â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function handleSpotClick(spot, bus, e) {
            if (e) {
                showFormsMenu(e, spot, bus);
            } else {
                if (bus) {
                    showNotification('info', `Ù…ÙˆÙ‚Ù #${spot}`, `Ø§Ù„Ø­Ø§ÙÙ„Ø©: ${bus.plate}`);
                } else {
                    showNotification('info', `Ù…ÙˆÙ‚Ù #${spot}`, 'Ø§Ù„Ù…ÙˆÙ‚Ù ÙØ§Ø±Øº - Ø§Ù†Ù‚Ø± Ù„Ù„Ø¥Ø¶Ø§ÙØ©');
                }
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function showNotification(type, title, message) {
            const container = document.getElementById('notifications');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `<strong>${title}</strong><br>${message}`;
            container.appendChild(notification);

            setTimeout(() => notification.remove(), 5000);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù„ÙˆØ­Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function togglePanel() {
            panelVisible = !panelVisible;
            const panel = document.getElementById('controlPanel');
            const btn = document.getElementById('toggleBtn');
            panel.classList.toggle('hidden', !panelVisible);
            btn.classList.toggle('shifted', !panelVisible);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.panel-tab').forEach(t => t.classList.remove('active'));
            document.getElementById('tab-' + tabName).classList.add('active');
            event.target.classList.add('active');
            if (tabName === 'kpis') updateKPIs();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø¯ÙˆØ¯ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function updateThresholds() {
            thresholds.early = parseInt(document.getElementById('earlyThreshold').value) || 7;
            thresholds.late = parseInt(document.getElementById('lateThreshold').value) || 3;
            updateStats();
            renderParkingGrid('entranceGrid', 1, 42);
            renderParkingGrid('exitGrid', 43, 87);
            showNotification('success', 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø¯ÙˆØ¯ Ø§Ù„ÙˆÙ‚Øª');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function updateColors() {
            document.documentElement.style.setProperty('--primary', document.getElementById('colorPrimary').value);
            document.documentElement.style.setProperty('--green', document.getElementById('colorEarly').value);
            document.documentElement.style.setProperty('--blue', document.getElementById('colorOntime').value);
            document.documentElement.style.setProperty('--red', document.getElementById('colorLate').value);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let settings = { sound: false, notif: true, autoRefresh: true };

        function toggleSetting(setting) {
            settings[setting] = !settings[setting];
            const toggle = document.getElementById(setting + 'Toggle');
            toggle.classList.toggle('active', settings[setting]);
            showNotification('info', 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', `${setting}: ${settings[setting] ? 'Ù…ÙØ¹Ù„' : 'Ù…Ø¹Ø·Ù„'}`);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø­Ø¬Ù… Ø§Ù„Ù…ÙˆØ§Ù‚Ù â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function updateSpotSize() {
            const size = document.getElementById('spotSize').value;
            document.querySelectorAll('.parking-spot').forEach(spot => {
                spot.style.minHeight = size + 'px';
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø­ÙØ¸ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function saveSettings() {
            const settingsData = {
                thresholds,
                settings,
                colors: {
                    primary: document.getElementById('colorPrimary').value,
                    early: document.getElementById('colorEarly').value,
                    ontime: document.getElementById('colorOntime').value,
                    late: document.getElementById('colorLate').value
                },
                spotSize: document.getElementById('spotSize').value
            };
            localStorage.setItem('LOCC_Settings', JSON.stringify(settingsData));
            showNotification('success', 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
        }

        function loadSettings() {
            const saved = localStorage.getItem('LOCC_Settings');
            if (saved) {
                const data = JSON.parse(saved);
                if (data.thresholds) {
                    thresholds = data.thresholds;
                    document.getElementById('earlyThreshold').value = thresholds.early;
                    document.getElementById('lateThreshold').value = thresholds.late;
                }
                if (data.settings) {
                    settings = data.settings;
                    document.getElementById('soundToggle').classList.toggle('active', settings.sound);
                    document.getElementById('notifToggle').classList.toggle('active', settings.notif);
                    document.getElementById('autoRefreshToggle').classList.toggle('active', settings.autoRefresh);
                }
                if (data.colors) {
                    document.getElementById('colorPrimary').value = data.colors.primary;
                    document.getElementById('colorEarly').value = data.colors.early;
                    document.getElementById('colorOntime').value = data.colors.ontime;
                    document.getElementById('colorLate').value = data.colors.late;
                    updateColors();
                }
                if (data.spotSize) {
                    document.getElementById('spotSize').value = data.spotSize;
                    updateSpotSize();
                }
                showNotification('success', 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
            }
        }

        function resetSettings() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŸ')) {
                localStorage.removeItem('LOCC_Settings');
                location.reload();
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let alertsList = [];

        function addAlert(type, title, message) {
            const alert = {
                id: Date.now(),
                type,
                title,
                message,
                time: new Date().toLocaleTimeString('ar-SA', { hour12: false })
            };
            alertsList.unshift(alert);
            if (alertsList.length > 50) alertsList.pop();
            renderAlerts();
            if (settings.notif) showNotification(type, title, message);
        }

        function renderAlerts() {
            const container = document.getElementById('alertsList');
            document.getElementById('alertsCount').textContent = alertsList.length;
            
            if (alertsList.length === 0) {
                container.innerHTML = '<div style="text-align:center;color:var(--text-muted);padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</div>';
                return;
            }
            
            container.innerHTML = alertsList.map(a => `
                <div class="alert-item ${a.type}">
                    <div class="alert-header">
                        <span class="alert-title">${a.title}</span>
                        <span class="alert-time">${a.time}</span>
                    </div>
                    <div>${a.message}</div>
                </div>
            `).join('');
        }

        function clearAlerts() {
            alertsList = [];
            renderAlerts();
            showNotification('info', 'Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª', 'ØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª');
        }

        function testAlert() {
            const types = ['critical', 'warning', 'info', 'success'];
            const type = types[Math.floor(Math.random() * types.length)];
            addAlert(type, 'ØªÙ†Ø¨ÙŠÙ‡ ØªØ¬Ø±ÙŠØ¨ÙŠ', 'Ù‡Ø°Ø§ ØªÙ†Ø¨ÙŠÙ‡ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let peakOccupancy = 0;

        function updateKPIs() {
            const total = busData.length;
            const occupancy = Math.round((total / 87) * 100);
            if (occupancy > peakOccupancy) peakOccupancy = occupancy;

            let early = 0, ontime = 0, late = 0, totalPax = 0;
            busData.forEach(bus => {
                const status = getStatus(bus.arrival, bus.departure);
                if (status.class === 'early') early++;
                else if (status.class === 'ontime') ontime++;
                else late++;
                totalPax += bus.pax || 0;
            });

            const onTimeRate = total > 0 ? Math.round(((early + ontime) / total) * 100) : 0;
            const avgPax = total > 0 ? Math.round(totalPax / total) : 0;
            const avgWait = Math.round(Math.random() * 30 + 10);

            document.getElementById('kpiOccupancy').textContent = occupancy + '%';
            document.getElementById('occupancyBar').style.width = occupancy + '%';
            document.getElementById('kpiAvgWait').textContent = avgWait;
            document.getElementById('kpiOnTimeRate').textContent = onTimeRate + '%';
            document.getElementById('onTimeBar').style.width = onTimeRate + '%';
            document.getElementById('onTimeBar').style.background = onTimeRate >= 80 ? 'var(--green)' : onTimeRate >= 50 ? 'var(--orange)' : 'var(--red)';
            document.getElementById('kpiAvgPax').textContent = avgPax;
            document.getElementById('kpiPeakOccupancy').textContent = peakOccupancy + '%';
            document.getElementById('kpiBusesToday').textContent = dailyStats.buses;
            document.getElementById('kpiPaxToday').textContent = dailyStats.pax.toLocaleString();

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ
            const totalStatus = early + ontime + late || 1;
            document.getElementById('barEarly').style.height = Math.max((early / totalStatus) * 100, 5) + '%';
            document.getElementById('barOntime').style.height = Math.max((ontime / totalStatus) * 100, 5) + '%';
            document.getElementById('barLate').style.height = Math.max((late / totalStatus) * 100, 5) + '%';
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¥Ø¶Ø§ÙØ© Ø­Ø§ÙÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let selectedSpot = null;

        function addNewBus() {
            const spotNum = parseInt(document.getElementById('newSpotNumber').value);
            if (!spotNum || spotNum < 1 || spotNum > 87) {
                showNotification('error', 'Ø®Ø·Ø£', 'Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù…ÙˆÙ‚Ù ØµØ­ÙŠØ­ (1-87)');
                return;
            }
            if (busData.find(b => b.spot === spotNum)) {
                showNotification('error', 'Ø®Ø·Ø£', 'Ø§Ù„Ù…ÙˆÙ‚Ù Ù…Ø´ØºÙˆÙ„ Ø¨Ø§Ù„ÙØ¹Ù„');
                return;
            }
            openForm('ScrSegregationIn', spotNum);
        }

        function selectSpot(spotNum, bus) {
            selectedSpot = { num: spotNum, bus };
            document.getElementById('spotActions').style.display = 'block';
            document.getElementById('selectedSpotNum').textContent = spotNum;
        }

        function editSpot() {
            if (selectedSpot && selectedSpot.bus) {
                openForm('ScrSegregationIn', selectedSpot.num);
            }
        }

        function moveSpot() {
            if (selectedSpot && selectedSpot.bus) {
                const newSpot = prompt('Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆÙ‚Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯ (1-87):');
                if (newSpot && !busData.find(b => b.spot === parseInt(newSpot))) {
                    selectedSpot.bus.spot = parseInt(newSpot);
                    updateStats();
                    renderParkingGrid('entranceGrid', 1, 42);
                    renderParkingGrid('exitGrid', 43, 87);
                    showNotification('success', 'Ù†Ù‚Ù„', `ØªÙ… Ù†Ù‚Ù„ Ø§Ù„Ø­Ø§ÙÙ„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ù ${newSpot}`);
                }
            }
        }

        function deleteSpot() {
            if (selectedSpot && selectedSpot.bus) {
                if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§ÙÙ„Ø©ØŸ')) {
                    busData = busData.filter(b => b.spot !== selectedSpot.num);
                    updateStats();
                    renderParkingGrid('entranceGrid', 1, 42);
                    renderParkingGrid('exitGrid', 43, 87);
                    document.getElementById('spotActions').style.display = 'none';
                    showNotification('warning', 'Ø­Ø°Ù', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø­Ø§ÙÙ„Ø©');
                }
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function openForm(formName, spotNum = null) {
            showNotification('info', 'Ø§Ù„Ù†Ù…Ø§Ø°Ø¬', `ÙØªØ­ Ù†Ù…ÙˆØ°Ø¬: ${formName}` + (spotNum ? ` - Ù…ÙˆÙ‚Ù ${spotNum}` : ''));
            currentFormName = formName;
            currentSpotForForm = spotNum;
            openFormModal(formName);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function showFormsMenu(e, spotNum, bus = null) {
            e.stopPropagation();
            const menu = document.getElementById('formsMenu');
            currentSpotForForm = spotNum;
            currentBusForForm = bus;
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
            updateFormStatusInMenu(bus);
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹
            let x = e.pageX;
            let y = e.pageY;
            if (x + 230 > window.innerWidth) x = window.innerWidth - 240;
            if (y + 300 > window.innerHeight) y = window.innerHeight - 310;
            
            menu.style.left = x + 'px';
            menu.style.top = y + 'px';
            menu.classList.add('active');
            
            // Ø¥ØºÙ„Ø§Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
            setTimeout(() => {
                document.addEventListener('click', closeFormsMenu, { once: true });
            }, 100);
        }

        function closeFormsMenu() {
            document.getElementById('formsMenu').classList.remove('active');
        }

        function updateFormStatusInMenu(bus) {
            const forms = ['ScrLogIn', 'ScrSegregationIn', 'ScrWelcomeLounge', 'ScrSegregationExit', 'ScrCurbside'];
            forms.forEach((form, i) => {
                const statusEl = document.getElementById('formStatus' + (i + 1));
                if (bus && bus.forms && bus.forms[form]) {
                    statusEl.textContent = 'OK';
                } else {
                    statusEl.textContent = 'â¬œ';
                }
            });
        }

        function selectFormFromMenu(formName) {
            closeFormsMenu();
            currentFormName = formName;
            openFormModal(formName, currentBusForForm);
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function openFormModal(formName, bus = null) {
            const modal = document.getElementById('modalOverlay');
            const title = document.getElementById('modalTitle');
            const body = document.getElementById('modalBody');
            
            const formTitles = {
                'ScrLogIn': 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„',
                'ScrSegregationIn': 'Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª Ù„Ù„ÙØµÙ„',
                'ScrWelcomeLounge': 'ØµØ§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨',
                'ScrSegregationExit': 'Ø®Ø±ÙˆØ¬ Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª Ù…Ù† Ø§Ù„ÙØµÙ„',
                'ScrCurbside': 'Ø§Ù„Ø±ØµÙŠÙ'
            };
            
            title.textContent = formTitles[formName] || formName;
            body.innerHTML = getFormHTML(formName, bus);
            modal.classList.add('active');
        }

        function getFormHTML(formName, bus = null) {
            const data = bus?.forms?.[formName] || {};
            // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø­Ø§ÙÙ„Ø© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            if (bus) {
                data.BusPlate = data.BusPlate || bus.plate;
                data.BusNO = data.BusNO || bus.busNo;
                data.FlightNo = data.FlightNo || bus.flight;
                data.PaxCount = data.PaxCount || bus.pax;
                data.GetaNO = data.GetaNO || bus.gate;
                data.ParkNO = data.ParkNO || bus.spot;
            }
            
            const forms = {
                'ScrLogIn': `
                    <div class="form-group">
                        <label class="form-label required">Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ù…Ù„</label>
                        <select class="form-select" id="cmbWorkLoc">
                            <option value="">Ø§Ø®ØªØ±...</option>
                            <option value="ScrLogIn" ${data.cmbWorkLoc === 'ScrLogIn' ? 'selected' : ''}>ScrLogIn</option>
                            <option value="ScrSegregationIn" ${data.cmbWorkLoc === 'ScrSegregationIn' ? 'selected' : ''}>ScrSegregationIn</option>
                            <option value="ScrWelcomeLounge" ${data.cmbWorkLoc === 'ScrWelcomeLounge' ? 'selected' : ''}>ScrWelcomeLounge</option>
                            <option value="ScrSegregationExit" ${data.cmbWorkLoc === 'ScrSegregationExit' ? 'selected' : ''}>ScrSegregationExit</option>
                            <option value="ScrCurbside" ${data.cmbWorkLoc === 'ScrCurbside' ? 'selected' : ''}>ScrCurbside</option>
                        </select>
                    </div>
                `,
                'ScrSegregationIn': `
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">BusPlate</label>
                            <input type="text" class="form-input" id="BusPlate" value="${data.BusPlate || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">BusNO</label>
                            <input type="number" class="form-input" id="BusNO" value="${data.BusNO || ''}">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">TripCount</label>
                            <input type="number" class="form-input" id="TripCount" value="${data.TripCount || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">DepTime</label>
                            <input type="datetime-local" class="form-input" id="DepTime" value="${data.DepTime || ''}" step="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">FlightNo</label>
                            <input type="text" class="form-input" id="FlightNo" value="${data.FlightNo || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">CurDT</label>
                            <input type="datetime-local" class="form-input" id="CurDT" value="${data.CurDT || new Date().toISOString().slice(0,16)}" step="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">TerminalCd</label>
                            <select class="form-select" id="TerminalCd">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="HT" ${data.TerminalCd === 'HT' ? 'selected' : ''}>HT</option>
                                <option value="NT" ${data.TerminalCd === 'NT' ? 'selected' : ''}>NT</option>
                                <option value="T1" ${data.TerminalCd === 'T1' ? 'selected' : ''}>T1</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">TotalPax</label>
                            <input type="text" class="form-input" id="TotalPax" value="${data.TotalPax || ''}">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">PaxCount</label>
                            <input type="number" class="form-input" id="PaxCount" value="${data.PaxCount || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Destination</label>
                            <input type="text" class="form-input" id="Destination" value="${data.Destination || ''}">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">DispatchSts</label>
                            <select class="form-select" id="DispatchSts">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="Ø®Ø§Ø·Ø¦" ${data.DispatchSts === 'Ø®Ø§Ø·Ø¦' ? 'selected' : ''}>Ø®Ø§Ø·Ø¦</option>
                                <option value="Ù…Ø¨ÙƒØ±" ${data.DispatchSts === 'Ù…Ø¨ÙƒØ±' ? 'selected' : ''}>Ù…Ø¨ÙƒØ±</option>
                                <option value="Ù…ØªØ£Ø®Ø±" ${data.DispatchSts === 'Ù…ØªØ£Ø®Ø±' ? 'selected' : ''}>Ù…ØªØ£Ø®Ø±</option>
                                <option value="Ù…Ø´ØªØ±Ùƒ Ø±Ø­Ù„Ø§Øª" ${data.DispatchSts === 'Ù…Ø´ØªØ±Ùƒ Ø±Ø­Ù„Ø§Øª' ? 'selected' : ''}>Ù…Ø´ØªØ±Ùƒ Ø±Ø­Ù„Ø§Øª</option>
                                <option value="Ù…Ø´ØªØ±Ùƒ Ø±Ø­Ù„Ø§Øª ÙˆØµØ§Ù„Ø§Øª" ${data.DispatchSts === 'Ù…Ø´ØªØ±Ùƒ Ø±Ø­Ù„Ø§Øª ÙˆØµØ§Ù„Ø§Øª' ? 'selected' : ''}>Ù…Ø´ØªØ±Ùƒ Ø±Ø­Ù„Ø§Øª ÙˆØµØ§Ù„Ø§Øª</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label required">VisaType</label>
                            <select class="form-select" id="VisaType">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="Hajj" ${data.VisaType === 'Hajj' ? 'selected' : ''}>Hajj</option>
                                <option value="GCC" ${data.VisaType === 'GCC' ? 'selected' : ''}>GCC</option>
                                <option value="Visit" ${data.VisaType === 'Visit' ? 'selected' : ''}>Visit</option>
                                <option value="Tourism" ${data.VisaType === 'Tourism' ? 'selected' : ''}>Tourism</option>
                                <option value="Work" ${data.VisaType === 'Work' ? 'selected' : ''}>Work</option>
                                <option value="Umrah" ${data.VisaType === 'Umrah' ? 'selected' : ''}>Umrah</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">UmrahCop</label>
                        <input type="text" class="form-input" id="UmrahCop" value="${data.UmrahCop || ''}">
                    </div>
                `,
                'ScrWelcomeLounge': `
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">BusNO</label>
                            <input type="number" class="form-input" id="BusNO" value="${bus?.busNo || data.BusNO || ''}" readonly style="background:#333;">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">ParkNO</label>
                            <input type="number" class="form-input" id="ParkNO" value="${currentSpotForForm || data.ParkNO || ''}" min="1" max="87" placeholder="1-87">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">BusPlate</label>
                            <input type="text" class="form-input" id="BusPlate" value="${bus?.plate || data.BusPlate || ''}" readonly style="background:#333;">
                        </div>
                        <div class="form-group">
                            <label class="form-label">BagStatus</label>
                            <select class="form-select" id="BagStatus">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="Ø¯ÙŠÙ†Ø©" ${data.BagStatus === 'Ø¯ÙŠÙ†Ø©' ? 'selected' : ''}>Ø¯ÙŠÙ†Ø©</option>
                                <option value="Ù„Ø§ ÙŠÙˆØ¬Ø¯" ${data.BagStatus === 'Ù„Ø§ ÙŠÙˆØ¬Ø¯' ? 'selected' : ''}>Ù„Ø§ ÙŠÙˆØ¬Ø¯</option>
                                <option value="Ù…Ø®ØªÙ„Ø·" ${data.BagStatus === 'Ù…Ø®ØªÙ„Ø·' ? 'selected' : ''}>Ù…Ø®ØªÙ„Ø·</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">T3CALL</label>
                            <input type="datetime-local" class="form-input" id="T3CALL" value="${data.T3CALL || ''}" step="1">
                        </div>
                        <div class="form-group">
                            <label class="form-label">FlightSts</label>
                            <select class="form-select" id="FlightSts">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="Ø£Ù‚Ù„Ø¹Øª" ${data.FlightSts === 'Ø£Ù‚Ù„Ø¹Øª' ? 'selected' : ''}>Ø£Ù‚Ù„Ø¹Øª</option>
                                <option value="Ø£ÙÙ„ØºÙŠØª" ${data.FlightSts === 'Ø£ÙÙ„ØºÙŠØª' ? 'selected' : ''}>Ø£ÙÙ„ØºÙŠØª</option>
                                <option value="Ù…ØªØ£Ø®Ø±Ø©" ${data.FlightSts === 'Ù…ØªØ£Ø®Ø±Ø©' ? 'selected' : ''}>Ù…ØªØ£Ø®Ø±Ø©</option>
                                <option value="ÙÙŠ Ø§Ù„Ù…ÙˆØ¹Ø¯" ${data.FlightSts === 'ÙÙŠ Ø§Ù„Ù…ÙˆØ¹Ø¯' ? 'selected' : ''}>ÙÙŠ Ø§Ù„Ù…ÙˆØ¹Ø¯</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">T3ACT</label>
                            <select class="form-select" id="T3ACT">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="Approval" ${data.T3ACT === 'Approval' ? 'selected' : ''}>Approval</option>
                                <option value="Waiting" ${data.T3ACT === 'Waiting' ? 'selected' : ''}>Waiting</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label required">GetaNO</label>
                            <select class="form-select" id="GetaNO">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="A1" ${data.GetaNO === 'A1' ? 'selected' : ''}>A1</option>
                                <option value="A2" ${data.GetaNO === 'A2' ? 'selected' : ''}>A2</option>
                                <option value="B1" ${data.GetaNO === 'B1' ? 'selected' : ''}>B1</option>
                                <option value="B2" ${data.GetaNO === 'B2' ? 'selected' : ''}>B2</option>
                                <option value="C1" ${data.GetaNO === 'C1' ? 'selected' : ''}>C1</option>
                                <option value="C2" ${data.GetaNO === 'C2' ? 'selected' : ''}>C2</option>
                                <option value="D1" ${data.GetaNO === 'D1' ? 'selected' : ''}>D1</option>
                                <option value="D2" ${data.GetaNO === 'D2' ? 'selected' : ''}>D2</option>
                                <option value="E1" ${data.GetaNO === 'E1' ? 'selected' : ''}>E1</option>
                                <option value="E2" ${data.GetaNO === 'E2' ? 'selected' : ''}>E2</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">T3APRO</label>
                        <input type="datetime-local" class="form-input" id="T3APRO" value="${data.T3APRO || ''}" step="1">
                    </div>
                `,
                'ScrSegregationExit': `
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">FlightNo</label>
                            <input type="text" class="form-input" id="FlightNo" value="${bus?.flight || data.FlightNo || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">BusPlate</label>
                            <input type="text" class="form-input" id="BusPlate" value="${bus?.plate || data.BusPlate || ''}">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">BusNO</label>
                            <input type="number" class="form-input" id="BusNO" value="${data.BusNO || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">ExitDT</label>
                            <input type="datetime-local" class="form-input" id="ExitDT" value="${data.ExitDT || new Date().toISOString().slice(0,16)}" step="1">
                        </div>
                    </div>
                    <div style="background:rgba(255,152,0,0.2);padding:10px;border-radius:6px;margin-top:10px;">
                        <span style="color:var(--orange);">âš ï¸ ØªØ­Ø°ÙŠØ±:</span> Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙØ¸ Ø³ÙŠØªÙ… Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ù ÙˆÙ†Ù‚Ù„ Ø§Ù„Ø­Ø§ÙÙ„Ø© Ù„Ù‚Ø³Ù… Ø§Ù„Ø¨ÙˆØ§Ø¨Ø§Øª
                    </div>
                `,
                'ScrCurbside': `
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">BusNO</label>
                            <input type="number" class="form-input" id="BusNO" value="${data.BusNO || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">BusDepDT</label>
                            <input type="datetime-local" class="form-input" id="BusDepDT" value="${data.BusDepDT || new Date().toISOString().slice(0,16)}" step="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">PaxDisembarkDT</label>
                            <input type="datetime-local" class="form-input" id="PaxDisembarkDT" value="${data.PaxDisembarkDT || ''}" step="1">
                        </div>
                        <div class="form-group">
                            <label class="form-label required">BusArrDT</label>
                            <input type="datetime-local" class="form-input" id="BusArrDT" value="${data.BusArrDT || ''}" step="1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label required">BusPlate</label>
                            <input type="text" class="form-input" id="BusPlate" value="${bus?.plate || data.BusPlate || ''}">
                        </div>
                        <div class="form-group">
                            <label class="form-label">DelayReason</label>
                            <select class="form-select" id="DelayReason">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="ZMZM" ${data.DelayReason === 'ZMZM' ? 'selected' : ''}>ZMZM</option>
                                <option value="Operations" ${data.DelayReason === 'Operations' ? 'selected' : ''}>Operations</option>
                                <option value="Bags" ${data.DelayReason === 'Bags' ? 'selected' : ''}>Bags</option>
                                <option value="Passport Distribution" ${data.DelayReason === 'Passport Distribution' ? 'selected' : ''}>Passport Distribution</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">FlightSts</label>
                            <select class="form-select" id="FlightSts">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="Ø£Ù‚Ù„Ø¹Øª" ${data.FlightSts === 'Ø£Ù‚Ù„Ø¹Øª' ? 'selected' : ''}>Ø£Ù‚Ù„Ø¹Øª</option>
                                <option value="Ø£ÙÙ„ØºÙŠØª" ${data.FlightSts === 'Ø£ÙÙ„ØºÙŠØª' ? 'selected' : ''}>Ø£ÙÙ„ØºÙŠØª</option>
                                <option value="Ù…ØªØ£Ø®Ø±Ø©" ${data.FlightSts === 'Ù…ØªØ£Ø®Ø±Ø©' ? 'selected' : ''}>Ù…ØªØ£Ø®Ø±Ø©</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label required">GetaNO</label>
                            <select class="form-select" id="GetaNO">
                                <option value="">Ø§Ø®ØªØ±...</option>
                                <option value="A1" ${(bus?.gate || data.GetaNO) === 'A1' ? 'selected' : ''}>A1</option>
                                <option value="A2" ${(bus?.gate || data.GetaNO) === 'A2' ? 'selected' : ''}>A2</option>
                                <option value="B1" ${(bus?.gate || data.GetaNO) === 'B1' ? 'selected' : ''}>B1</option>
                                <option value="B2" ${(bus?.gate || data.GetaNO) === 'B2' ? 'selected' : ''}>B2</option>
                                <option value="C1" ${(bus?.gate || data.GetaNO) === 'C1' ? 'selected' : ''}>C1</option>
                                <option value="C2" ${(bus?.gate || data.GetaNO) === 'C2' ? 'selected' : ''}>C2</option>
                                <option value="D1" ${(bus?.gate || data.GetaNO) === 'D1' ? 'selected' : ''}>D1</option>
                                <option value="D2" ${(bus?.gate || data.GetaNO) === 'D2' ? 'selected' : ''}>D2</option>
                                <option value="E1" ${(bus?.gate || data.GetaNO) === 'E1' ? 'selected' : ''}>E1</option>
                                <option value="E2" ${(bus?.gate || data.GetaNO) === 'E2' ? 'selected' : ''}>E2</option>
                            </select>
                        </div>
                    </div>
                    <div style="background:rgba(244,67,54,0.2);padding:10px;border-radius:6px;margin-top:10px;">
                        <span style="color:var(--red);">âš ï¸ ØªØ­Ø°ÙŠØ±:</span> Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙØ¸ Ø³ÙŠØªÙ… Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø­Ø§ÙÙ„Ø© Ù…Ù† Ø§Ù„Ø¨ÙˆØ§Ø¨Ø§Øª ÙˆÙ†Ù‚Ù„Ù‡Ø§ Ù„Ø³Ø¬Ù„ Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©
                    </div>
                `
            };
            
            return forms[formName] || '<p>Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ØºÙŠØ± Ù…ØªÙˆÙØ±</p>';
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('active');
            currentFormName = null;
            currentSpotForForm = null;
            currentBusForForm = null;
        }

        function closeModalOnOverlay(e) {
            if (e.target.id === 'modalOverlay') closeModal();
        }

        function saveFormData() {
            // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            const formData = {};
            const inputs = document.querySelectorAll('#modalBody input, #modalBody select');
            inputs.forEach(input => {
                formData[input.id] = input.value;
            });
            formData.timestamp = new Date().toISOString();
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            if (currentFormName === 'ScrSegregationIn') {
                // ØªØ³Ø¬ÙŠÙ„ Ø­Ø§ÙÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© - ØªØ¸Ù‡Ø± ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© "Ù…Ø³Ø¬Ù„Ø©" Ø¨Ø¯ÙˆÙ† Ù…ÙˆÙ‚Ù
                const newBus = {
                    id: Date.now(),
                    plate: formData.BusPlate,
                    busNo: formData.BusNO,
                    flight: formData.FlightNo,
                    pax: parseInt(formData.PaxCount) || 0,
                    visa: formData.VisaType,
                    terminal: formData.TerminalCd,
                    destination: formData.Destination,
                    departure: formData.DepTime,
                    arrival: new Date().toISOString(),
                    tripCount: formData.TripCount,
                    totalPax: formData.TotalPax,
                    dispatchSts: formData.DispatchSts,
                    umrahCop: formData.UmrahCop,
                    curDT: formData.CurDT,
                    spot: null, // Ø¨Ø¯ÙˆÙ† Ù…ÙˆÙ‚Ù Ø­ØªÙ‰ ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯Ù‡ ÙÙŠ ScrWelcomeLounge
                    gate: null,
                    forms: { ScrSegregationIn: formData }
                };
                busData.push(newBus);
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                dailyStats.buses++;
                dailyStats.pax += newBus.pax;
                dailyStats.flights.add(newBus.flight);
                
                // ØªØ­Ø¯ÙŠØ¯ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙÙˆÙŠØ¬
                const status = getStatus(newBus.arrival, newBus.departure);
                if (status.class === 'early') dailyStats.early++;
                else if (status.class === 'ontime') dailyStats.ontime++;
                else if (status.class === 'late') dailyStats.late++;
                
                showNotification('success', 'ScrSegregationIn', `ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø§ÙÙ„Ø© ${formData.BusPlate} - Ø§Ø¶ØºØ· Ø¹Ù„ÙŠÙ‡Ø§ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© "Ù…Ø³Ø¬Ù„Ø©" Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ù`);
                
            } else if (currentFormName === 'ScrWelcomeLounge') {
                // Ø§Ø³ØªÙƒÙ…Ø§Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø§ÙÙ„Ø© - ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ù
                const spotNum = parseInt(formData.ParkNO);
                
                if (!spotNum || spotNum < 1 || spotNum > 87) {
                    showNotification('error', 'Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø±Ù‚Ù… Ù…ÙˆÙ‚Ù ØµØ­ÙŠØ­ (1-87)');
                    return;
                }
                
                // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù…ÙˆÙ‚Ù ÙØ§Ø±Øº
                const existingBus = busData.find(b => b.spot === spotNum);
                if (existingBus && existingBus.id !== currentBusForForm?.id) {
                    showNotification('error', 'Ø®Ø·Ø£', `Ø§Ù„Ù…ÙˆÙ‚Ù ${spotNum} Ù…Ø´ØºÙˆÙ„ Ø¨Ø§Ù„ÙØ¹Ù„`);
                    return;
                }
                
                // ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§ÙÙ„Ø©
                if (currentBusForForm) {
                    const busIndex = busData.findIndex(b => b.id === currentBusForForm.id);
                    if (busIndex !== -1) {
                        busData[busIndex].spot = spotNum;
                        busData[busIndex].gate = formData.GetaNO;
                        busData[busIndex].bagStatus = formData.BagStatus;
                        busData[busIndex].flightSts = formData.FlightSts;
                        busData[busIndex].t3call = formData.T3CALL;
                        busData[busIndex].t3act = formData.T3ACT;
                        busData[busIndex].t3apro = formData.T3APRO;
                        busData[busIndex].forms.ScrWelcomeLounge = formData;
                    }
                }
                
                showNotification('success', 'ScrWelcomeLounge', `ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ù ${spotNum} Ù„Ù„Ø­Ø§ÙÙ„Ø©`);
                
            } else if (currentFormName === 'ScrSegregationExit') {
                // Ø®Ø±ÙˆØ¬ Ø§Ù„Ø­Ø§ÙÙ„Ø© Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ù
                if (currentBusForForm) {
                    const busIndex = busData.findIndex(b => b.id === currentBusForForm.id);
                    if (busIndex !== -1) {
                        const bus = busData[busIndex];
                        bus.exitDT = formData.ExitDT;
                        bus.forms.ScrSegregationExit = formData;
                        bus.spot = null; // Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ù
                        // Ø§Ù„Ø­Ø§ÙÙ„Ø© ØªØ¨Ù‚Ù‰ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„ÙƒÙ† Ø¨Ø¯ÙˆÙ† Ù…ÙˆÙ‚Ù - ØªÙ†ØªØ¸Ø± Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©
                    }
                }
                showNotification('success', 'ScrSegregationExit', 'ØªÙ… Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…ÙˆÙ‚Ù');
                
            } else if (currentFormName === 'ScrCurbside') {
                // Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ø­Ø§ÙÙ„Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹
                if (currentBusForForm) {
                    const busIndex = busData.findIndex(b => b.id === currentBusForForm.id);
                    if (busIndex !== -1) {
                        const bus = busData.splice(busIndex, 1)[0];
                        bus.busDepDT = formData.BusDepDT;
                        bus.busArrDT = formData.BusArrDT;
                        bus.paxDisembarkDT = formData.PaxDisembarkDT;
                        bus.delayReason = formData.DelayReason;
                        bus.forms.ScrCurbside = formData;
                        departedBuses.unshift(bus);
                    }
                }
                showNotification('success', 'ScrCurbside', 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ø­Ø§ÙÙ„Ø©');
            }
            
            closeModal();
            
            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            saveData();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            updateStats();
            renderParkingGrid('entranceGrid', 1, 42);
            renderParkingGrid('exitGrid', 43, 87);
            renderGates();
            updateBusLists();
            updateKPIs();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ØªØ­Ø¯ÙŠØ« Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function updateBusLists() {
            updateRegisteredList();
            updateSegregationList();
            updateDepartedList();
        }

        function updateRegisteredList() {
            const list = document.getElementById('registeredList');
            document.getElementById('registeredCount').textContent = busData.length;
            
            if (busData.length === 0) {
                list.innerHTML = '<div style="text-align:center;color:var(--text-muted);padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§ÙÙ„Ø§Øª Ù…Ø³Ø¬Ù„Ø©</div>';
                return;
            }
            
            list.innerHTML = busData.map(bus => {
                const status = getStatus(bus.arrival, bus.departure);
                const formsCompleted = bus.forms ? Object.keys(bus.forms).length : 1;
                const busJson = JSON.stringify(bus).replace(/"/g, '&quot;');
                return `
                    <div class="bus-card ${status.class}" onclick="openBusForm('${busJson}')">
                        <div class="bus-card-header">
                            <span class="bus-card-plate">${bus.plate}</span>
                            <span class="bus-card-badge ${status.class}">${bus.spot ? 'Ù…ÙˆÙ‚Ù ' + bus.spot : 'Ø§Ù†ØªØ¸Ø§Ø± Ù…ÙˆÙ‚Ù'}</span>
                        </div>
                        <div class="bus-card-info">
                            <span>B: ${bus.busNo || '-'}</span>
                            <span>F: ${bus.flight || '-'}</span>
                            <span>P: ${bus.pax || '-'}</span>
                            <span>G: ${bus.gate || '-'}</span>
                        </div>
                        <div class="bus-card-progress">
                            <div class="bus-card-progress-fill" style="width:${formsCompleted * 25}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // ÙØªØ­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø­Ø§ÙÙ„Ø©
        function openBusForm(busJson) {
            const bus = JSON.parse(busJson.replace(/&quot;/g, '"'));
            currentBusForForm = bus;
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§ÙÙ„Ø©
            if (!bus.spot) {
                // Ø§Ù„Ø­Ø§ÙÙ„Ø© Ø¨Ø¯ÙˆÙ† Ù…ÙˆÙ‚Ù - ÙØªØ­ ScrWelcomeLounge Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ù
                openFormModal('ScrWelcomeLounge', bus);
            } else if (!bus.forms?.ScrSegregationExit) {
                // Ø§Ù„Ø­Ø§ÙÙ„Ø© ÙÙŠ Ù…ÙˆÙ‚Ù - ÙØªØ­ ScrSegregationExit Ù„Ù„Ø®Ø±ÙˆØ¬
                openFormModal('ScrSegregationExit', bus);
            } else {
                // Ø§Ù„Ø­Ø§ÙÙ„Ø© Ø®Ø±Ø¬Øª Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ù - ÙØªØ­ ScrCurbside Ù„Ù„Ù…ØºØ§Ø¯Ø±Ø©
                openFormModal('ScrCurbside', bus);
            }
        }

        function updateSegregationList() {
            const list = document.getElementById('segregationList');
            const segregationBuses = busData.filter(b => b.spot);
            document.getElementById('segregationCount').textContent = segregationBuses.length;
            
            if (segregationBuses.length === 0) {
                list.innerHTML = '<div style="text-align:center;color:var(--text-muted);padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§ÙÙ„Ø§Øª ÙÙŠ Ø§Ù„ÙØ±Ø²</div>';
                return;
            }
            
            list.innerHTML = segregationBuses.map(bus => {
                const status = getStatus(bus.arrival, bus.departure);
                return `
                    <div class="bus-card ${status.class}" onclick="showFormsMenu(event, ${bus.spot})">
                        <div class="bus-card-header">
                            <span class="bus-card-plate">${bus.plate}</span>
                            <span class="bus-card-badge ${status.class}">Ù…ÙˆÙ‚Ù ${bus.spot}</span>
                        </div>
                        <div class="bus-card-info">
                            <span>${bus.flight}</span>
                            <span>${bus.pax || '-'}</span>
                            <span>${status.hours.toFixed(1)} Ø³</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateDepartedList() {
            const list = document.getElementById('departedList');
            document.getElementById('departedCount').textContent = departedBuses.length;
            document.getElementById('departedToday').textContent = departedBuses.length;
            document.getElementById('departedPax').textContent = departedBuses.reduce((s, b) => s + (b.pax || 0), 0);
            
            if (departedBuses.length === 0) {
                list.innerHTML = '<div style="text-align:center;color:var(--text-muted);padding:20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§ÙÙ„Ø§Øª ØºØ§Ø¯Ø±Øª</div>';
                return;
            }
            
            list.innerHTML = departedBuses.slice(0, 20).map(bus => `
                <div class="bus-card completed" onclick="showFormsMenu(event, null)">
                    <div class="bus-card-header">
                        <span class="bus-card-plate">${bus.plate}</span>
                        <span class="bus-card-badge completed">Ù…ÙƒØªÙ…Ù„Ø©</span>
                    </div>
                    <div class="bus-card-info">
                        <span>${bus.flight}</span>
                        <span>${bus.pax || '-'}</span>
                        <span>${bus.gate || '-'}</span>
                    </div>
                </div>
            `).join('');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„ØªÙƒØ¨ÙŠØ± â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function zoomIn() { setZoom(Math.min(zoomLevel + 10, 150)); }
        function zoomOut() { setZoom(Math.max(zoomLevel - 10, 50)); }
        function zoomReset() { setZoom(100); }

        function setZoom(level) {
            zoomLevel = parseInt(level);
            document.getElementById('zoomLevel').textContent = zoomLevel + '%';
            document.getElementById('zoomSlider').value = zoomLevel;
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªÙƒØ¨ÙŠØ± Ø¹Ù„Ù‰ Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…ÙˆØ§Ù‚Ù ÙÙ‚Ø· Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¥Ø·Ø§Ø± Ø§Ù„Ø«Ø§Ø¨Øª
            const parkingContainer = document.getElementById('parkingContainer');
            if (parkingContainer) {
                parkingContainer.style.transform = `scale(${zoomLevel/100})`;
                parkingContainer.style.transformOrigin = 'top right';
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ÙˆØ¶Ø¹ Ø§Ù„ØªØ­Ø±ÙŠØ± â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function toggleEditMode() {
            editMode = !editMode;
            document.getElementById('editBtn').textContent = editMode ? 'Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ­Ø±ÙŠØ±' : 'ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ØªØ­Ø±ÙŠØ±';
            showNotification(editMode ? 'success' : 'info', 'ÙˆØ¶Ø¹ Ø§Ù„ØªØ­Ø±ÙŠØ±', editMode ? 'ØªÙ… Ø§Ù„ØªÙØ¹ÙŠÙ„' : 'ØªÙ… Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø§Ù„ØªØµØ¯ÙŠØ± ÙˆØ§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function exportJSON() {
            const data = JSON.stringify({ busData, dailyStats: {...dailyStats, flights: [...dailyStats.flights]} }, null, 2);
            downloadFile(data, 'LOCC_Data.json', 'application/json');
            showNotification('success', 'ØªØµØ¯ÙŠØ±', 'ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
        }

        function exportCSV() {
            let csv = 'Ø§Ù„Ù…ÙˆÙ‚Ù,Ø§Ù„Ù„ÙˆØ­Ø©,Ø§Ù„Ø±Ø­Ù„Ø©,Ø§Ù„Ø±ÙƒØ§Ø¨,Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©,Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©,Ø§Ù„Ø­Ø§Ù„Ø©\n';
            busData.forEach(b => {
                const s = getStatus(b.arrival, b.departure);
                csv += `${b.spot},${b.plate},${b.flight},${b.pax},${b.gate},${b.departure},${s.label}\n`;
            });
            downloadFile(csv, 'LOCC_Data.csv', 'text/csv');
            showNotification('success', 'ØªØµØ¯ÙŠØ±', 'ØªÙ… ØªØµØ¯ÙŠØ± CSV Ø¨Ù†Ø¬Ø§Ø­');
        }

        function downloadFile(data, filename, type) {
            const blob = new Blob(['\ufeff' + data], { type: type + ';charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
        }

        function importJSON(e) {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(ev) {
                try {
                    const d = JSON.parse(ev.target.result);
                    busData = d.busData || d;
                    if (d.dailyStats) dailyStats = {...d.dailyStats, flights: new Set(d.dailyStats.flights)};
                    updateStats();
                    renderParkingGrid('entranceGrid', 1, 42);
                    renderParkingGrid('exitGrid', 43, 87);
                    saveData();
                    showNotification('success', 'Ø§Ø³ØªÙŠØ±Ø§Ø¯', 'ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
                } catch { showNotification('error', 'Ø®Ø·Ø£', 'ÙØ´Ù„ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù'); }
            };
            reader.readAsText(file);
        }

        function resetAll() {
            if (confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ')) {
                busData = [];
                dailyStats = { buses: 0, pax: 0, early: 0, ontime: 0, late: 0, flights: new Set() };
                localStorage.removeItem('LOCC_Data');
                updateStats();
                renderParkingGrid('entranceGrid', 1, 42);
                renderParkingGrid('exitGrid', 43, 87);
                showNotification('warning', 'Ù…Ø³Ø­', 'ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            }
        }

        function clearAllData() {
            // ØªØµÙÙŠØ± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø§ÙÙ„Ø§Øª
            busData = [];
            departedBuses = [];
            
            // ØªØµÙÙŠØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
            dailyStats = { buses: 0, pax: 0, early: 0, ontime: 0, late: 0, flights: new Set() };
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
            updateStats();
            renderParkingGrid('entranceGrid', 1, 42);
            renderParkingGrid('exitGrid', 43, 87);
            renderGates();
            updateRegisteredList();
            updateSegregationList();
            updateDepartedList();
            updateKPIs();
            
            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ§Ø±ØºØ©
            saveData();
            
            showNotification('success', 'ØªØµÙÙŠØ±', 'ØªÙ… ØªØµÙÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª');
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø­ÙØ¸ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function saveData() {
            localStorage.setItem('LOCC_Data', JSON.stringify({
                busData,
                departedBuses,
                dailyStats: {...dailyStats, flights: [...dailyStats.flights]}
            }));
        }

        function loadData() {
            const saved = localStorage.getItem('LOCC_Data');
            if (saved) {
                const d = JSON.parse(saved);
                busData = d.busData || [];
                departedBuses = d.departedBuses || []
                if (d.dailyStats) dailyStats = {...d.dailyStats, flights: new Set(d.dailyStats.flights || [])};
            }
            // Ù„Ø§ Ù†Ø­Ù…Ù‘Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù‡Ù†Ø§ - Ø³ØªÙØ­Ù…Ù‘Ù„ ÙÙŠ init Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª
        }

        function filterBuses(type) {
            showNotification('info', 'ÙÙ„ØªØ±Ø©', `Ø¹Ø±Ø¶: ${type === 'all' ? 'Ø§Ù„ÙƒÙ„' : type}`);
        }
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø­Ø¬Ù… Ø§Ù„Ù…ÙˆØ§Ù‚Ù â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let spotSize = 55;

        function spotSizeIn() { setSpotSize(Math.min(spotSize + 5, 100)); }
        function spotSizeOut() { setSpotSize(Math.max(spotSize - 5, 40)); }

        function setSpotSize(size) {
            spotSize = parseInt(size);
            document.getElementById('spotSizeLevel').textContent = spotSize + 'px';
            document.getElementById('spotSizeSlider').value = spotSize;
            document.querySelectorAll('.parking-spot').forEach(spot => {
                spot.style.minHeight = spotSize + 'px';
                spot.style.maxWidth = spotSize + 'px';
            });
        }
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Ø¨Ø¯Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù… â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        init();
    </script>
</body>
</html>
